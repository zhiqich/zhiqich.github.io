<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Zhiqi Chen</title>
  <icon>http://yoursite.com/icon.png</icon>
  <subtitle>Story</subtitle>
  <link href="http://yoursite.com/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2021-03-05T03:08:14.868Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Zhiqi Chen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOS14 USB Tethering Issue on Ubuntu20.04 LTS</title>
    <link href="http://yoursite.com/2021/03/04/tethering/"/>
    <id>http://yoursite.com/2021/03/04/tethering/</id>
    <published>2021-03-05T02:40:00.000Z</published>
    <updated>2021-03-05T03:08:14.868Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Issue"><a href="#Issue" class="headerlink" title="Issue"></a>Issue</h2><p>Due to the change of <code>IPHETH_BUF_SIZE</code> parameter from 1516 to 1514 in iOS14, iPhone could not provide tethering connection to Ubuntu20.04 LTS.</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Modify the <code>IPHETH_BUF_SIZE</code> parameter in the source file <em>ipheth.c</em>.</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">cd /lib/modules/$(uname -r)/kernel/drivers/net/usb/</span><br><span class="line">cp -ia ipheth.ko ipheth.ko.orig</span><br><span class="line">xxd -p -c 20000 ipheth.ko.orig | sed 's/ec05/ea05/g' | xxd -r -p &gt; ipheth.ko</span><br><span class="line">strip --strip-debug ipheth.ko</span><br><span class="line">rmmod ipheth; modprobe ipheth</span><br></pre></td></tr></table></figure><h2 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite"></a>Prerequisite</h2><p>Install <code>sudo apt install build-essential</code> if there’s Wi-Fi or ethernet connection. If there’s no internet access available on the device, try downloading Ubuntu deb packages of build-essential <a href="https://drive.google.com/drive/folders/1olJSft3HWL2qdB1lxQxhTkJblFSFSrU1?usp=sharing" target="_blank" rel="noopener">Download</a> and installing with command <code>sudo dpkg -i package_name.deb</code>.</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i libc6_2.31-0ubuntu9.1_amd64.deb</span><br><span class="line">sudo dpkg -i manpages-dev_5.05-1_all.deb</span><br><span class="line">sudo dpkg -i binutils-common_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i linux-libc-dev_5.4.0-48.52_amd64.deb</span><br><span class="line">sudo dpkg -i libctf-nobfd0_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i libgomp1_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libquadmath0_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libmpc3_1.1.0-1_amd64.deb</span><br><span class="line">sudo dpkg -i libatomic1_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libubsan1_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libcrypt-dev_4.4.10-10ubuntu4_amd64.deb</span><br><span class="line">sudo dpkg -i libisl22_0.22.1-1_amd64.deb</span><br><span class="line">sudo dpkg -i libbinutils_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i libc-dev-bin_2.31-0ubuntu9.1_amd64.deb</span><br><span class="line">sudo dpkg -i libcc1-0_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i liblsan0_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libitm1_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i gcc-9-base_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i libtsan0_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libctf0_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i libasan5_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i cpp-9_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i libc6-dev_2.31-0ubuntu9.1_amd64.deb</span><br><span class="line">sudo dpkg -i binutils-x86-64-linux-gnu_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i binutils_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i libgcc-9-dev_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i cpp_9.3.0-1ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i gcc-9_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i gcc_9.3.0-1ubuntu2_amd64.deb</span><br></pre></td></tr></table></figure><p><i><font color = gray><br>Copyright: Zhihu 「宋泠雨」, CC 4.0 BY-SA<br><a href="https://zhuanlan.zhihu.com/p/342499361\" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/342499361\</a><br>Copyright: CSDN 「恍恍惚惚斯基」, CC 4.0 BY-SA<br><a href="https://blog.csdn.net/weixin_42432439/article/details/108777302" target="_blank" rel="noopener">https://blog.csdn.net/weixin_42432439/article/details/108777302</a><br></font></i></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="project" scheme="http://yoursite.com/categories/project/"/>
    
    
  </entry>
  
  <entry>
    <title>9</title>
    <link href="http://yoursite.com/2021/03/02/9/"/>
    <id>http://yoursite.com/2021/03/02/9/</id>
    <published>2021-03-02T18:47:34.000Z</published>
    <updated>2021-03-02T18:51:27.233Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><center><i><font color = gray>《繁花》 金宇澄</font></i></center><p>阿宝十岁，<br>邻居蓓蒂六岁。<br>两个人从假三层爬上屋顶，<br>瓦片温热，眼里是半个卢湾区……<br>蓓蒂拉紧阿宝，<br>小身体靠紧，<br>头发飞舞。<br>东南风一劲，<br>听见黄浦江船鸣，<br>圆号宽广的嗡嗡声，<br>抚慰少年人胸怀。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="raving" scheme="http://yoursite.com/categories/raving/"/>
    
    
  </entry>
  
  <entry>
    <title>OpenDHT</title>
    <link href="http://yoursite.com/2021/02/10/opendht/"/>
    <id>http://yoursite.com/2021/02/10/opendht/</id>
    <published>2021-02-11T04:46:29.000Z</published>
    <updated>2021-02-11T04:51:38.295Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>OpenDHT is a lightweight C++14 Distributed Hash Table implementation. It provides an easy to use distributed in-memory data store. Every node in the network can read and write values to the store. Values are distributed over the network, with redundancy.</p><h2 id="Build"><a href="#Build" class="headerlink" title="Build"></a>Build</h2><h3 id="Tool"><a href="#Tool" class="headerlink" title="Tool"></a>Tool</h3><ul><li>Operating system  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Linux ubuntu 5.8.0-43-generic #49~20.04.1-Ubuntu SMP Fri Feb 5 09:57:56 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure></li><li>GCC  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc (Ubuntu 10.2.0-5ubuntu1~20.04) 10.2.0</span><br><span class="line">Copyright (C) 2020 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the source for copying conditions.  There is NO</span><br><span class="line">warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br></pre></td></tr></table></figure></li><li>Clang  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">clang version 11.0.0</span><br><span class="line">Target: x86_64-unknown-linux-gnu</span><br><span class="line">Thread model: posix</span><br><span class="line">InstalledDir: /usr/local/bin</span><br></pre></td></tr></table></figure></li><li>CMake  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmake version 3.19.4</span><br><span class="line"></span><br><span class="line">CMake suite maintained and supported by Kitware (kitware.com/cmake).</span><br></pre></td></tr></table></figure><h3 id="Dependency"><a href="#Dependency" class="headerlink" title="Dependency"></a>Dependency</h3></li><li>OpenDHT dependencies  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libncurses5-dev libreadline-dev nettle-dev libgnutls28-dev libargon2-0-dev libmsgpack-dev  libssl-dev libfmt-dev libjsoncpp-dev libhttp-parser-dev libasio-dev</span><br></pre></td></tr></table></figure></li><li>Python binding dependencies  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cython3 python3-dev python3-setuptools</span><br></pre></td></tr></table></figure></li><li>Restinio  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir restinio &amp;&amp; cd restinio</span><br><span class="line">wget https://github.com/aberaud/restinio/archive/2c0b6f5e5ba04d7a74e8406a3df1fd433680599d.tar.g</span><br><span class="line">ls -l &amp;&amp; tar -xzf 2c0b6f5e5ba04d7a74e8406a3df1fd433680599d.tar.gz</span><br><span class="line">cd restinio-2c0b6f5e5ba04d7a74e8406a3df1fd433680599d/dev</span><br><span class="line">cmake -DCMAKE_INSTALL_PREFIX=/usr -DRESTINIO_TEST=OFF -DRESTINIO_SAMPLE=OFF -DRESTINIO_INSTALL_SAMPLES=OFF -DRESTINIO_BENCH=OFF -DRESTINIO_INSTALL_BENCHES=OFF -DRESTINIO_FIND_DEPS=ON -DRESTINIO_ALLOW_SOBJECTIZER=Off -DRESTINIO_USE_BOOST_ASIO=none .</span><br><span class="line">make -j2</span><br><span class="line">sudo make install</span><br><span class="line">cd ../../../ &amp;&amp; rm -rf restinio</span><br></pre></td></tr></table></figure><h3 id="Build-1"><a href="#Build-1" class="headerlink" title="Build"></a>Build</h3></li><li>Clone the repo  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/savoirfairelinux/opendht.git</span><br></pre></td></tr></table></figure></li><li>Build and install  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd opendht</span><br><span class="line">mkdir build &amp;&amp; cd build</span><br><span class="line">cmake -DOPENDHT_PYTHON=ON -DCMAKE_INSTALL_PREFIX=/usr ..</span><br><span class="line">make -j2</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="Python3"><a href="#Python3" class="headerlink" title="Python3"></a>Python3</h3></li><li>Example code  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> opendht <span class="keyword">as</span> dht</span><br><span class="line"></span><br><span class="line">node = dht.DhtRunner()</span><br><span class="line">node.run()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Join the network through any running node,</span></span><br><span class="line"><span class="comment"># here using a known bootstrap node.</span></span><br><span class="line">node.bootstrap(<span class="string">"bootstrap.jami.net"</span>, <span class="string">"4222"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># blocking call (provide callback arguments to make the call non-blocking)</span></span><br><span class="line">node.put(dht.InfoHash.get(<span class="string">"unique_key"</span>), dht.Value(<span class="string">b'some binary data'</span>))</span><br><span class="line"></span><br><span class="line">results = node.get(dht.InfoHash.get(<span class="string">"unique_key"</span>))</span><br><span class="line"><span class="keyword">for</span> r <span class="keyword">in</span> results:</span><br><span class="line">    print(r)</span><br></pre></td></tr></table></figure></li><li>Command line result  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Value[id:640b4d1af8908cc4 data:736f6d652062696e6172792064617461]</span><br></pre></td></tr></table></figure></li><li>Decode  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bytearray.fromhex(<span class="string">"736f6d652062696e6172792064617461"</span>).decode()</span><br><span class="line"><span class="string">'some binary data'</span></span><br></pre></td></tr></table></figure><h2 id="Dhtnode"><a href="#Dhtnode" class="headerlink" title="Dhtnode"></a>Dhtnode</h2>Dhtnode is a command line tool which allows to run a DHT node and perform operations to the distributed in-memory data store.<h3 id="Command-Line-Running"><a href="#Command-Line-Running" class="headerlink" title="Command Line Running"></a>Command Line Running</h3>Dhtnode can run directly in command line. There are several parameters that can be set when creating a dht node.<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dhtnode [-p local_port] [-b bootstrap_host:port] [-n netid] [-i] [-D] [-f] [-v [-l logfile|-L]] [-s|-d]</span><br></pre></td></tr></table></figure></li><li><code>-b</code> allows to specify a bootstrap node address (can be any running node of the DHT network)</li><li><code>-p</code> allows to specify the local UDP port to bind (optional). If not set, will use any available port. Note that the default OpenDHT port (to ideally use for public nodes) is 4222</li><li><code>-D</code> enables the multicast automatic local peer discovery mechanism<h3 id="Command-Line-Interface"><a href="#Command-Line-Interface" class="headerlink" title="Command Line Interface"></a>Command Line Interface</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">OpenDHT command line interface (CLI)</span><br><span class="line">Possible commands:</span><br><span class="line">h, help    Print this help message.</span><br><span class="line">x, quit    Quit the program.</span><br><span class="line">log        Start/stop printing DHT logs.</span><br><span class="line"></span><br><span class="line">Node information:</span><br><span class="line">ll         Print basic information and stats about the current node.</span><br><span class="line">ls [key]   Print basic information about current search(es).</span><br><span class="line">ld [key]   Print basic information about currently stored values on this node (or key).</span><br><span class="line">lr         Print the full current routing table of this node.</span><br><span class="line"></span><br><span class="line">Operations on the DHT:</span><br><span class="line">b &lt;ip:port&gt;           Ping potential node at given IP address/port.</span><br><span class="line">g &lt;key&gt;               Get values at &lt;key&gt;.</span><br><span class="line">l &lt;key&gt;               Listen for value changes at &lt;key&gt;.</span><br><span class="line">cl &lt;key&gt; &lt;token&gt;      Cancel listen for &lt;token&gt; and &lt;key&gt;.</span><br><span class="line">p &lt;key&gt; &lt;str&gt;         Put string value at &lt;key&gt;.</span><br><span class="line">pp &lt;key&gt; &lt;str&gt;        Put string value at &lt;key&gt; (persistent version).</span><br><span class="line">cpp &lt;key&gt; &lt;id&gt;        Cancel persistent put operation for &lt;key&gt; and value &lt;id&gt;.</span><br><span class="line">s &lt;key&gt; &lt;str&gt;         Put string value at &lt;key&gt;, signed with our generated private key.</span><br><span class="line">e &lt;key&gt; &lt;dest&gt; &lt;str&gt;  Put string value at &lt;key&gt;, encrypted for &lt;dest&gt; with its public key (if found).</span><br><span class="line">cc                    Trigger connectivity changed signal.</span><br><span class="line"></span><br><span class="line">Indexation operations on the DHT:</span><br><span class="line">il &lt;name&gt; &lt;key&gt; [exact match]   Lookup the index named &lt;name&gt; with the key &lt;key&gt;.</span><br><span class="line">                                Set [exact match] to 'false' for inexact match lookup.</span><br><span class="line">ii &lt;name&gt; &lt;key&gt; &lt;value&gt;         Inserts the value &lt;value&gt; under the key &lt;key&gt; in the index named &lt;name&gt;.</span><br></pre></td></tr></table></figure><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3></li><li>Create node  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zhiqich@ubuntu:~/Documents/opendht$ dhtnode -D</span><br><span class="line">OpenDHT node db159e7c839b5872692b244deeb849eb8195233b running on port 39901</span><br><span class="line"> (type 'h' or 'help' for a list of possible commands)</span><br></pre></td></tr></table></figure></li><li>Check stats  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; ll</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; OpenDHT node db159e7c839b5872692b244deeb849eb8195233b running on port 39901</span></span><br><span class="line">1 ongoing operations</span><br><span class="line">IPv4 stats:</span><br><span class="line">Known nodes: 0 good, 0 dubious, 0 incoming.</span><br><span class="line">0 searches, 0 total cached nodes</span><br><span class="line"></span><br><span class="line">IPv6 stats:</span><br><span class="line">Known nodes: 0 good, 0 dubious, 0 incoming.</span><br><span class="line">0 searches, 0 total cached nodes</span><br></pre></td></tr></table></figure></li><li>Put value  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; p <span class="built_in">test</span> <span class="string">"this is a test string"</span></span></span><br><span class="line">Using h(test) = a94a8fe5ccb19ba61c4c0873d391e987982fbbd3</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; Put: success, took 1.36 ms. Value ID: 8530bb7894ee21b1</span></span><br></pre></td></tr></table></figure></li><li>Get value  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; g <span class="built_in">test</span></span></span><br><span class="line">Using h(test) = a94a8fe5ccb19ba61c4c0873d391e987982fbbd3</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; Get: found 1 value(s) after 178 us</span></span><br><span class="line"> Value[id:8530bb7894ee21b1 data(text/plain):""this"]</span><br><span class="line">Get: completed, took 1.4 ms</span><br></pre></td></tr></table></figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/opendht-01.jpg" alt=""><h2 id="Dhtchat"><a href="#Dhtchat" class="headerlink" title="Dhtchat"></a>Dhtchat</h2>Dhtchat is a simple IM client working over the dht.<h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zhiqich@ubuntu:~/Documents/opendht$ dhtchat -h</span><br><span class="line">Usage: dhtchat [-n network_id] [-p local_port] [-b bootstrap_host[:port]]</span><br><span class="line"></span><br><span class="line">dhtchat, a simple OpenDHT command line chat client.</span><br><span class="line">Report bugs to: https://opendht.net</span><br></pre></td></tr></table></figure></li><li>Flags are similar to those of Dhtnode</li><li><code>-D</code> enables the multicast automatic local peer discovery mechanism<h3 id="Command-Line-Interface-1"><a href="#Command-Line-Interface-1" class="headerlink" title="Command Line Interface"></a>Command Line Interface</h3></li><li><code>c {channel}</code> to join a channel</li><li><code>d</code> to disconnect the channel</li><li><code>e {target} {message}</code> to send an encrypted message to a specific user with public key ID<h3 id="Demo-1"><a href="#Demo-1" class="headerlink" title="Demo"></a>Demo</h3></li><li>Create chat node  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zhiqich@ubuntu:~/Documents/opendht$ dhtchat -D</span><br><span class="line">OpenDHT node 1f04c73f6c5af467cd68ba4058a065bc0731ac19 running on port 59537</span><br><span class="line">Public key ID ecd52bfcb037b225e9021d5149a84a17eb881f4b</span><br><span class="line">  type 'c &#123;hash&#125;' to join a channel</span><br></pre></td></tr></table></figure></li><li>Join channel  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> c <span class="built_in">test</span></span></span><br><span class="line">Joining h(test) = a94a8fe5ccb19ba61c4c0873d391e987982fbbd3</span><br></pre></td></tr></table></figure></li><li>Chat  <figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; hi</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; d108ebdc3f238876e94e59d6214ab465d644b460 at 2021-02-10 23:09:59 (took 0.811252s) : 10835693456077075259 - hi</span></span><br></pre></td></tr></table></figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/opendht-02.jpg" alt=""><br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/opendht-03.jpg" alt=""></li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="project" scheme="http://yoursite.com/categories/project/"/>
    
    
  </entry>
  
  <entry>
    <title>Japan</title>
    <link href="http://yoursite.com/2021/02/10/japan/"/>
    <id>http://yoursite.com/2021/02/10/japan/</id>
    <published>2021-02-11T04:32:11.000Z</published>
    <updated>2021-02-26T06:24:44.174Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>跑代码的时候迷迷糊糊睡着了，梦到在跟三岛喝茶聊天，茶水太烫就醒了，到底聊了什么也记不真切了，倒是提醒我在记忆没模糊之前赶紧记下些东西。</p><p>我是在2018年初去的日本，掐头去尾总共待了六天，走了大阪、京都和东京这三个城市，赶在东京大雪前一天回的家。当时对日本文学特别痴迷，无法拒绝留白带来的情感上的刺激，于是很坚定地决定一个人旅行。</p><p>在关西国际机场下了飞机，搭乘关西机场线前往市区。原本打算乘南海电气铁道特快的，就是那个蓝色的铁胆火车侠，结果发现忘买特快票了，只好搭乘慢车，就当慢慢欣赏沿途风景了。从乡间驶向城郊，最后进到市区，原本车上大多都是来旅游的小家庭，慢慢多了些提着公文包下班回家的人，再后来是穿着制服的学生，从上车到下车一直喋喋不休，感觉和旁边安静看书的上班族像是两个世界的人。我总觉得有些格格不入，内心是活泼的，行为又受诸多克制，像夹在两者中间，后来索性从座位站了起来专心看窗外。日本这些JR线路车票都挺有意思的，仔细看上面印着些动漫人物的图案，纸张手感也不错，我特意随身带了一个收藏夹，把车票、门票还有小票这些乱七八糟的小玩意儿都收了起来，现在应该还躺在家里的书橱里。</p><p>到酒店放好行李，听懂了“black fast”是什么意思之后，就直接跑去梅田蓝天大厦，想看看日落，结果忘了有一个小时的时差，出了地铁站已经天黑了，直接成了看夜景。展望台真的是像星空一般洒了点点荧光，城市的灯光看得入神。下了楼差不多也有七八点了，刚好跑去道顿堀吃晚饭。记得很清楚第一顿吃的是金龙拉面。日本点菜是有一个小机器，每道菜有个按钮，想吃什么就按什么，然后直接在机器上付钱拿小票，再把小票给店家就好了。我偷偷看前面几位的操作，就学会了，避免了尴尬。金龙拉面的店面是半露天的，有点像武侠小说客栈的那种感觉，体验很棒。之后在道顿堀心斋桥边走边看，尝了街边的章鱼丸子，还有另几样叫不出名字的小吃，吃饱喝足后回家。</p><p>第二天一大早去了大阪城公园和里头的天守阁。公园其实没什么可看的，跟普通城市公园没什么两样，大多都是老人在晨练健身。天守阁前养了不少鸽子，有一些家长带着孩子在那儿玩儿。可能因为比较早，那个时间段就只有我一个人乘电梯上天守阁，电梯管理员看我好像不是本地人就突然用中文问好，挺惊喜的，跟我说她正在学一点中文，听着没什么口音。天守阁上也就是讲一些日本战国历史，并没有什么特别新奇的，随便转了一会儿就下来了，找到了一个卖冷饮的车，买了一个抹茶甜筒吃。</p><p>这次旅行并没有做太详细的攻略和准备，只是粗略地在纸上写了一些地点，然后看时间和心情走到哪儿是哪儿。下午乘车到了四天王寺附近，吃了顿连锁猪排饭，不知道是不是因为走了一早上太饿了，出奇的好吃。四天王寺那段时间好像刚好在修缮，有一部分建筑被帷幕遮着，也有一些脚手架。寺院人不是很多，大部分是老太太，会花一点钱点一根蜡烛，经过的时候会点头示意，觉得是有一些仪式感在那里的。从四天王寺出来，好像经过了一所幼稚园，误打误撞到了一个叫极乐净土之庭的地方，我看时间还早就进去走了走，没成想竟到了个小世外桃源。园中景观布置很精致，有一些中式园林的感觉，有些岔出的小径尽头会摆上神龛，好像有说法会摆上心脏做祭品，西部世界也有过相似的场景。那天只有我一个游客，真的有种极乐净土的感觉。晚上跑去法善寺横町吃了晚饭，是一家吃串串的店，门口有个大玩偶的，名字记不住了，旁边还有一家买红豆粥（？）的。整个法善寺横町的灯光和氛围特别有日式传统的感觉，刚好下过一点小雨，吃完饭在附近散了散步，有烟火气。</p><p>在大阪的最后一天踩了踩马路，逛了逛通天阁新世界，傍晚去了港口，第一次乘了摩天轮。回家的路上余晖洒在新刷完字的柏油路上，拓下了房屋和电线杆的影子，一瞬间有所感。好像还有一些去过的地方，像是难波、御堂筋、黑门市场，已经记不太清了。</p><p>第二站京都，一座很美好的城市，我一直有些后悔没有留足够的时间游览。从大阪到京都乘的JR电车，很快就到了，在车站寄存了行李之后就直接乘公交去了清水寺。在日本的这几天好像天气都很遂我愿，恰好下着小雨，和清水寺很般配。虽说不是红叶季，古朴的建筑依然很有美感。</p><p>前段时间听《plastic love》有点上头，想起去年暑假困在安娜堡的时候刘玮伦和他们的乐队翻弹翻唱这首歌，还有半夜开车去中校拍“大城市夜景”的事，会心一笑。</p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=530 height=86 src="//music.163.com/outchain/player?type=2&id=1499202794&auto=0&height=66"></iframe>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="travel" scheme="http://yoursite.com/categories/travel/"/>
    
    
  </entry>
  
  <entry>
    <title>8</title>
    <link href="http://yoursite.com/2021/02/08/8/"/>
    <id>http://yoursite.com/2021/02/08/8/</id>
    <published>2021-02-08T05:07:44.000Z</published>
    <updated>2021-02-08T05:28:51.699Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>今早电台随机到了Sufjan Stevens的专辑Greetings From Michigan The Great Lake State，看封面图片有些眼熟，下午码代码的时候突然想起来是在西雅图住的工作室里见到过它的黑胶唱片。算是一个小惊喜，又有点萌生买黑胶唱片机的念头。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="raving" scheme="http://yoursite.com/categories/raving/"/>
    
    
  </entry>
  
  <entry>
    <title>Apache Nutch &amp; Solr</title>
    <link href="http://yoursite.com/2021/01/31/apachenutch/"/>
    <id>http://yoursite.com/2021/01/31/apachenutch/</id>
    <published>2021-01-31T23:36:14.000Z</published>
    <updated>2021-01-31T23:53:11.460Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Apache Nutch and Apache Solr are projects from Apache Lucene search engine. Nutch is an open source crawler which provides the Java library for crawling, indexing and database storage. Solr is an open source search platform which provides full-text search and integration with Nutch. The following contents are steps of setting up Nutch and Solr for crawling and searching.</p><h2 id="Environment-Setup"><a href="#Environment-Setup" class="headerlink" title="Environment Setup"></a>Environment Setup</h2><h3 id="Operating-System"><a href="#Operating-System" class="headerlink" title="Operating System"></a>Operating System</h3><p>Ubuntu 20.04.1 64bit running on VMware with 4 cores and 8GB memory<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/nutch-01.jpg" alt=""></p><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><p>Java Runtime/Development Environment is JDK 1.8/Java 8<br>Installed by command line </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openjdk-8-jdk</span><br></pre></td></tr></table></figure><p>Installation can be checked by </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p>and the result in command line should be </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openjdk version "1.8.0_275"</span><br><span class="line">OpenJDK Runtime Environment (build 1.8.0_275-8u275-b01-0ubuntu1~20.04-b01)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 25.275-b01, mixed mode)</span><br></pre></td></tr></table></figure><p>After installation, add the JAVA_HOME parameter to the environment </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br><span class="line">export JAVA_HOME=$(readlink -f /usr/bin/java | sed "s:bin/java::")</span><br></pre></td></tr></table></figure><p>If successful, the result should be like </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo $JAVA_HOME</span><br><span class="line">/usr/lib/jvm/java-8-openjdk-amd64/jre/</span><br></pre></td></tr></table></figure><h3 id="Localhost"><a href="#Localhost" class="headerlink" title="Localhost"></a>Localhost</h3><p>Check the localhost file </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure><p>and there should be a line for local ip address similar to </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1   localhost</span><br></pre></td></tr></table></figure><h2 id="Nutch-Installation"><a href="#Nutch-Installation" class="headerlink" title="Nutch Installation"></a>Nutch Installation</h2><p>Download a binary package of Apache Nutch version 1.15 from Apache Archives (<a href="https://archive.apache.org/dist/nutch/1.15/)\" target="_blank" rel="noopener">https://archive.apache.org/dist/nutch/1.15/)\</a><br>Unzip the package and get the folder apache-nutch-1.15/<br>To verify the installation, run command line </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd apache-nutch-1.15/</span><br><span class="line">bin/nutch</span><br></pre></td></tr></table></figure><p>the result should be similar to </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">nutch 1.15</span><br><span class="line">Usage: nutch COMMAND</span><br><span class="line">where COMMAND is one of:</span><br><span class="line">  readdb            read / dump crawl db</span><br><span class="line">  mergedb           merge crawldb-s, with optional filtering</span><br><span class="line">  readlinkdb        read / dump link db</span><br><span class="line">  inject            inject new urls into the database</span><br><span class="line">  generate          generate new segments to fetch from crawl db</span><br><span class="line">  freegen           generate new segments to fetch from text files</span><br><span class="line">  fetch             fetch a segment's pages</span><br><span class="line">  parse             parse a segment's pages</span><br><span class="line">  readseg           read / dump segment data</span><br><span class="line">  mergesegs         merge several segments, with optional filtering and slicing</span><br><span class="line">  updatedb          update crawl db from segments after fetching</span><br><span class="line">  invertlinks       create a linkdb from parsed segments</span><br><span class="line">  mergelinkdb       merge linkdb-s, with optional filtering</span><br><span class="line">  index             run the plugin-based indexer on parsed segments and linkdb</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/nutch-02.jpg" alt=""></p><h2 id="Solr-Setup"><a href="#Solr-Setup" class="headerlink" title="Solr Setup"></a>Solr Setup</h2><h3 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h3><p>Download a binary package of Apache Solr version 7.3.1 from Apache Archives (<a href="https://archive.apache.org/dist/lucene/solr/7.3.1/)\" target="_blank" rel="noopener">https://archive.apache.org/dist/lucene/solr/7.3.1/)\</a><br>Unzip the package and get the folder solr-7.3.1/<br>Download corresponding Nutch schema from <a href="https://raw.githubusercontent.com/apache/nutch/master/src/plugin/indexer-solr/schema.xml" target="_blank" rel="noopener">https://raw.githubusercontent.com/apache/nutch/master/src/plugin/indexer-solr/schema.xml</a></p><h3 id="Set-Solr-Core"><a href="#Set-Solr-Core" class="headerlink" title="Set Solr Core"></a>Set Solr Core</h3><p>Create resources for a new Solr core nutch </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd solr-7.3.1/</span><br><span class="line">mkdir -p server/solr/configsets/nutch/</span><br></pre></td></tr></table></figure><p>Copy the downloaded schema to core nutch configuration (instead of the schema directly from downloaded Nutch package, otherwise occurs fieldType “pdates” error) </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ../../Downloads/schema.xml server/solr/configsets/nutch/conf/</span><br></pre></td></tr></table></figure><p>Delete the schema template </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm server/solr/configsets/nutch/conf/managed-schema</span><br></pre></td></tr></table></figure><p>Start Solr server </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/solr start</span><br></pre></td></tr></table></figure><p>Create Solr core nutch </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/solr create -c nutch -d server/solr/configsets/nutch/conf/</span><br></pre></td></tr></table></figure><p>Test the server by launching <a href="http://localhost:8983/solr/#/\" target="_blank" rel="noopener">http://localhost:8983/solr/#/\</a><br>Stop Solr server (after the crawling and searching) </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/solr stop</span><br></pre></td></tr></table></figure><h3 id="Nutch-Integration"><a href="#Nutch-Integration" class="headerlink" title="Nutch Integration"></a>Nutch Integration</h3><p>The index writer configuration file for Nutch version 1.15 is conf/index-writers.xml in which the format and meta data can be modified<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/nutch-03.jpg" alt=""></p><h2 id="Crawl-Setup"><a href="#Crawl-Setup" class="headerlink" title="Crawl Setup"></a>Crawl Setup</h2><h3 id="Crawl-Property"><a href="#Crawl-Property" class="headerlink" title="Crawl Property"></a>Crawl Property</h3><p>Default crawl properties is set in conf/nutch-default.xml which defines properties for file, http, plugin and so on<br>Custom crawl properties can be set in conf/nutch-site.xml and there are two must-have properties to set </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- HTTP properties --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>http.agent.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>Nutch<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- plugin properties --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>plugin.includes<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>protocol-http|urlfilter-(regex|validator)|parse-(html|tika)|index-(basic|anchor)|indexer-solr|scoring-opic|urlnormalizer-(pass|regex|basic)<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The indexer-solr is a must in plugin.includes property which is the default setting in conf/nutch-default.xml</p><h3 id="Seed-URLs"><a href="#Seed-URLs" class="headerlink" title="Seed URLs"></a>Seed URLs</h3><p>Create a URL seed list file by </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd apache-nutch-1.15/</span><br><span class="line">mkdir -p urls</span><br><span class="line">cd urls</span><br><span class="line">touch seed.txt</span><br></pre></td></tr></table></figure><p>One URL per line for each site to crawl and it is important to design the seed list to avoid unnecessary pages and reduce crawling time<br>For example, if the crawling target is the list of professors and students major in computer science, the seed list can be chosen from faculty and student pages of universities </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;www.cc.gatech.edu&#x2F;people&#x2F;faculty</span><br><span class="line">https:&#x2F;&#x2F;www.cc.gatech.edu&#x2F;people&#x2F;phd</span><br><span class="line">https:&#x2F;&#x2F;cse.engin.umich.edu&#x2F;people&#x2F;faculty&#x2F;</span><br><span class="line">https:&#x2F;&#x2F;cse.engin.umich.edu&#x2F;people&#x2F;phd-students&#x2F;</span><br></pre></td></tr></table></figure><p>Regular Expression Filters can be configured in conf/regex-urlfilter.txt to limit the crawling range</p><h2 id="Crawling"><a href="#Crawling" class="headerlink" title="Crawling"></a>Crawling</h2><h3 id="Crawl-Database"><a href="#Crawl-Database" class="headerlink" title="Crawl Database"></a>Crawl Database</h3><p>Databases are used in crawling to store fetched information and the URL queue<br>Crawl database (crawldb) is provided by Nutch to store URL information obtained by Nutch (seeded or fetched) including the status and the time fetched<br>Link database (linkdb) is provided by Nutch to store the links to each URL including the source URL and the anchor text of each link<br>External databases can also be integrated to Nutch but need to configure<br>Before fetching URLs, insert the seed list to initiate crawldb </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/nutch inject crawl/crawldb urls</span><br></pre></td></tr></table></figure><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/nutch-04.jpg" alt=""></p><h3 id="Fetching"><a href="#Fetching" class="headerlink" title="Fetching"></a>Fetching</h3><p>First generate a fetch list (URL queue) from the database </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/nutch generate crawl/crawldb crawl/segments</span><br></pre></td></tr></table></figure><p>The list will be placed in a newly created segment directory names by the timestamp when it is created<br>Create the abbreviation of the most recent fetch list to make the later expression simple </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s1=`ls -d crawl/segments/2* | tail -1`</span><br><span class="line">echo $s1</span><br></pre></td></tr></table></figure><p>Run the fetcher on the segment </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/nutch fetch $s1</span><br></pre></td></tr></table></figure><p>The fetching time will depend on the length of the URL list and the number of links in each URL<br>Parse the entries after fetching </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/nutch parse $s1</span><br></pre></td></tr></table></figure><p>Update the database with the results of the fetch </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/nutch updatedb crawl/crawldb $s1</span><br></pre></td></tr></table></figure><p>After the first round fetching, the database contains both the initial pages and the newly discovered pages linked to the seed URLs so that a second round fetching can be further processed<br>Number of top-scoring pages can be chosen when generating the fetching list by the flag -topN </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/nutch generate crawl/crawldb crawl/segments -topN 1000</span><br></pre></td></tr></table></figure><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/nutch-05.jpg" alt=""></p><h3 id="Indexing"><a href="#Indexing" class="headerlink" title="Indexing"></a>Indexing</h3><p>Invert all of the links </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/nutch invertlinks crawl/linkdb -dir crawl/segments</span><br></pre></td></tr></table></figure><p>Index all the resources by Solr (use index instead of solrindex which is deprecated) </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/nutch index crawl/crawldb/ -linkdb crawl/linkdb/ -dir crawl/segments -filter -normalize -deleteGone</span><br></pre></td></tr></table></figure><p>There are more options for the index command but may not be applied </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: Indexer (&lt;crawldb&gt; | -nocrawldb) (&lt;segment&gt; ... | -dir &lt;segments&gt;) [general options]</span><br></pre></td></tr></table></figure><p>Usually deleting duplication is necessary when indexing, but Solr will handle it automatically </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: bin/nutch dedup &lt;crawldb&gt; [-group &lt;none|host|domain&gt;] [-compareOrder &lt;score&gt;,&lt;fetchTime&gt;,&lt;httpsOverHttp&gt;,&lt;urlLength&gt;]</span><br></pre></td></tr></table></figure><p>After done searching, clean Solr to maintain a healthier quality of index </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/nutch clean crawl/crawldb/</span><br></pre></td></tr></table></figure><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/nutch-06.jpg" alt=""></p><h3 id="Script"><a href="#Script" class="headerlink" title="Script"></a>Script</h3><p>Crawl script is provide by Nutch to allow more options and parameter modification for crawling, but it may not be so useful in crawling a small number of URLs when step-by-step operation and monitor are necessary </p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Usage: crawl [options] &lt;crawl_dir&gt; &lt;num_rounds&gt;</span><br><span class="line"></span><br><span class="line">Arguments:</span><br><span class="line">  &lt;crawl_dir&gt;                           Directory where the crawl/host/link/segments dirs are saved</span><br><span class="line">  &lt;num_rounds&gt;                          The number of rounds to run this crawl for</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -i|--index                            Indexes crawl results into a configured indexer</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="Searching"><a href="#Searching" class="headerlink" title="Searching"></a>Searching</h2><p>After crawling and indexing, launch Solr quey console (<a href="http://localhost:8983/solr/#/nutch/query)\" target="_blank" rel="noopener">http://localhost:8983/solr/#/nutch/query)\</a><br>Text queries in the q block using key-value pairs, for example, search pages with key word “system” in “content” </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">content:system</span><br></pre></td></tr></table></figure><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/nutch-07.jpg" alt=""><br>Searching range and other query parameters can be set with provided options</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://cwiki.apache.org/confluence/display/NUTCH/NutchTutorial" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/NUTCH/NutchTutorial</a></li><li><a href="https://cwiki.apache.org/confluence/display/NUTCH/IndexWriters" target="_blank" rel="noopener">https://cwiki.apache.org/confluence/display/NUTCH/IndexWriters</a></li><li><a href="https://lobster1234.github.io/2017/08/14/search-with-nutch-mongodb-solr/" target="_blank" rel="noopener">https://lobster1234.github.io/2017/08/14/search-with-nutch-mongodb-solr/</a></li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="project" scheme="http://yoursite.com/categories/project/"/>
    
    
  </entry>
  
  <entry>
    <title>7</title>
    <link href="http://yoursite.com/2021/01/20/7/"/>
    <id>http://yoursite.com/2021/01/20/7/</id>
    <published>2021-01-21T02:39:02.000Z</published>
    <updated>2021-01-21T02:56:11.106Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>“阿收则是出神地忆起，实习演员公演时第一场戏的夜晚。他扮演饭店的门童，而且是开幕时就出场的演员，因此帷幕从他的脚边徐徐上升。对于自己以这身装扮，出现在光雾弥漫的观众前，不禁战栗了起来，觉得自己的存在被别人的眼睛吸走了，转移成别人的存在。他忆起了这份战栗……”</p><p>“至于镜子，她很喜欢放养这些年轻人，因此也很喜欢他们发呆恍神的样子。她直觉地知道，他们并非在想昨晚的女人。镜子也感受到，旅途将尽、疲惫至极反而复苏的兴奋情绪。唯一烦恼的是，强劲的海风是否会吹乱她的头发……”</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="raving" scheme="http://yoursite.com/categories/raving/"/>
    
    
  </entry>
  
  <entry>
    <title>6</title>
    <link href="http://yoursite.com/2021/01/03/6/"/>
    <id>http://yoursite.com/2021/01/03/6/</id>
    <published>2021-01-04T00:23:19.000Z</published>
    <updated>2021-01-04T00:36:23.608Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>心血来潮在阳台拍了一段日落时分的延时，一些参数忘记手动设了，所以噪点好像多了一些，不过把照片做成视频最后的效果看起来还挺不错的。收三脚架的时候不小心摔了相机，有点心疼，还好有兔笼和遮光罩承受一下，机身和镜头都没什么大问题。</p><iframe width="700" height="394" src="https://www.youtube-nocookie.com/embed/2D_nUKZNGH4" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="raving" scheme="http://yoursite.com/categories/raving/"/>
    
    
  </entry>
  
  <entry>
    <title>5</title>
    <link href="http://yoursite.com/2020/12/29/5/"/>
    <id>http://yoursite.com/2020/12/29/5/</id>
    <published>2020-12-29T18:38:07.000Z</published>
    <updated>2020-12-29T19:10:58.374Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>得知EVA新剧场版最终章订档的消息非常兴奋，趁着假期又重新看了一遍，甚至头一回找了漫画书，很难想象是什么样的疯子才能画出这样的作品。有点想仔细读一些关于宗教的书籍，说不定会有特别的收获。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/eva-01.jpg" alt=""></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="raving" scheme="http://yoursite.com/categories/raving/"/>
    
    
  </entry>
  
  <entry>
    <title>Chatbot API</title>
    <link href="http://yoursite.com/2020/12/25/chatbotapi/"/>
    <id>http://yoursite.com/2020/12/25/chatbotapi/</id>
    <published>2020-12-26T04:11:36.000Z</published>
    <updated>2020-12-26T05:57:35.393Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="Chatbot-API-Detail"><a href="#Chatbot-API-Detail" class="headerlink" title="Chatbot API Detail"></a>Chatbot API Detail</h3><ul><li>Request address: <a href="http://api.qingyunke.com/api.php" target="_blank" rel="noopener">http://api.qingyunke.com/api.php</a></li><li>Request method: GET</li><li>Encode: UTF-8</li><li>Request sample: <a href="http://api.qingyunke.com/api.php?key=free&amp;appid=0&amp;msg=msg" target="_blank" rel="noopener">http://api.qingyunke.com/api.php?key=free&amp;appid=0&amp;msg=msg</a></li><li>Response: {“result”:0,”content”:response}</li></ul><h3 id="HTML-API-Request"><a href="#HTML-API-Request" class="headerlink" title="HTML API Request"></a>HTML API Request</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reqListener</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.responseText);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">oReq.addEventListener(<span class="string">"load"</span>, reqListener);</span><br><span class="line">oReq.open(<span class="string">"GET"</span>, <span class="string">"http://api.qingyunke.com/api.php?key=free&amp;appid=0&amp;msg=msg"</span>);</span><br><span class="line">oReq.send();</span><br></pre></td></tr></table></figure><h3 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h3><ul><li>[Warning] [blocked] The page was not allowed to run insecure content from <a href="http://api.qingyunke.com/api.php?key=free&amp;appid=0&amp;msg=msg" target="_blank" rel="noopener">http://api.qingyunke.com/api.php?key=free&amp;appid=0&amp;msg=msg</a></li><li>Origin null is not allowed by Access-Control-Allow-Origin</li><li>Both of the above two problems are due to Apple’s policy: Safari does not allow users to disable the block on mixed content</li></ul><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><ul><li>Upgrade HTTP connection to HTTPS connection</li><li>Proxy the content through an HTTPS connection</li></ul>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;</summary>
        
      
    
    
    
    <category term="project" scheme="http://yoursite.com/categories/project/"/>
    
    
  </entry>
  
</feed>
