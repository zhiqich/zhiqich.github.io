<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Implementation of algorithms designed by Yiding Ji and Stéphane Lafortune  AbstractThe paper investigates quantitative supervisory control with a local mean payoff objective for weighted discrete even">
<meta property="og:type" content="article">
<meta property="og:title" content="Supervisory Control under Local Mean Payoff Constraints">
<meta property="og:url" content="http://example.com/2020/07/18/supervisorycontrol/index.html">
<meta property="og:site_name" content="Zhiqi Chen">
<meta property="og:description" content="Implementation of algorithms designed by Yiding Ji and Stéphane Lafortune  AbstractThe paper investigates quantitative supervisory control with a local mean payoff objective for weighted discrete even">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/photo/supervisory-control-01.jpg">
<meta property="og:image" content="http://example.com/photo/supervisory-control-02.jpg">
<meta property="og:image" content="http://example.com/photo/supervisory-control-03.jpg">
<meta property="og:image" content="http://example.com/photo/supervisory-control-04.jpg">
<meta property="og:image" content="http://example.com/photo/supervisory-control-05.jpg">
<meta property="article:published_time" content="2020-07-18T21:43:27.000Z">
<meta property="article:modified_time" content="2023-01-06T02:07:09.037Z">
<meta property="article:author" content="Zhiqi Chen">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/photo/supervisory-control-01.jpg">


<link rel="canonical" href="http://example.com/2020/07/18/supervisorycontrol/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2020/07/18/supervisorycontrol/","path":"2020/07/18/supervisorycontrol/","title":"Supervisory Control under Local Mean Payoff Constraints"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Supervisory Control under Local Mean Payoff Constraints | Zhiqi Chen</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Zhiqi Chen</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Story</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-travel"><a href="/categories/travel/" rel="section"><i class="fa fa-map fa-fw"></i>travel</a></li><li class="menu-item menu-item-game"><a href="/categories/game/" rel="section"><i class="fa fa-gamepad fa-fw"></i>game</a></li><li class="menu-item menu-item-project"><a href="/categories/project/" rel="section"><i class="fa fa-code fa-fw"></i>project</a></li><li class="menu-item menu-item-caprice"><a href="/categories/caprice/" rel="section"><i class="fa fa-music fa-fw"></i>caprice</a></li><li class="menu-item menu-item-raving"><a href="/categories/raving/" rel="section"><i class="fa fa-leaf fa-fw"></i>raving</a></li><li class="menu-item menu-item-story"><a href="/categories/story/" rel="section"><i class="fa fa-book fa-fw"></i>story</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Abstract"><span class="nav-number">1.</span> <span class="nav-text">Abstract</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Automaton-Model"><span class="nav-number">2.</span> <span class="nav-text">Automaton Model</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Algorithm-1"><span class="nav-number">3.</span> <span class="nav-text">Algorithm 1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Algorithm-2"><span class="nav-number">4.</span> <span class="nav-text">Algorithm 2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Algorithm-3"><span class="nav-number">5.</span> <span class="nav-text">Algorithm 3</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zhiqi Chen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">60</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/zhiqich" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zhiqich" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:abraxas.zhiqich@gmail.com" title="E-Mail → mailto:abraxas.zhiqich@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/07/18/supervisorycontrol/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Supervisory Control under Local Mean Payoff Constraints | Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Supervisory Control under Local Mean Payoff Constraints
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-07-18 17:43:27" itemprop="dateCreated datePublished" datetime="2020-07-18T17:43:27-04:00">2020-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-01-05 21:07:09" itemprop="dateModified" datetime="2023-01-05T21:07:09-05:00">2023-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/project/" itemprop="url" rel="index"><span itemprop="name">project</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <center><i><font color = gray>Implementation of algorithms designed by Yiding Ji and Stéphane Lafortune</font></i></center>

<h3 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h3><p>The paper investigates quantitative supervisory control with a local mean payoff objective for weighted discrete event system. The supervisor is designed to ensure that the mean payoff of weights over a fixed number of transitions never drops below a given threshold, aka the system stability. The algorithms transfer the supervisory control problem to a biparty game between the supervisor and the environment.</p>
<h3 id="Automaton-Model"><a href="#Automaton-Model" class="headerlink" title="Automaton Model"></a>Automaton Model</h3><p>The weighted discrete event system can be modeled as an automaton. Here shows an example. The state with “!” is unsafe ($x_8$). The set of controllable events is $E_c&#x3D;\{a,b,c,d,e,f\}$, and the set of uncontrollable events is $E_{uc}&#x3D;\{u_1,u_2,u_3,u_4,u_5\}$. The localhost website gui is supported by the <em>WebMachine</em> from <em>transitions_gui</em> package.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">visualizeMachine</span>(<span class="params">states, transitions, initial, name, ordered_transitions=<span class="literal">False</span>, ignore_invalid_triggers=<span class="literal">True</span>, auto_transitions=<span class="literal">False</span></span>):</span><br><span class="line">    machine = WebMachine(states=states, transitions=transitions, initial=initial, name=name,</span><br><span class="line">                         ordered_transitions=ordered_transitions,</span><br><span class="line">                         ignore_invalid_triggers=ignore_invalid_triggers,</span><br><span class="line">                         auto_transitions=auto_transitions)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        machine.stop_server()</span><br></pre></td></tr></table></figure>

<p><img src="/photo/supervisory-control-01.jpg"></p>
<h3 id="Algorithm-1"><a href="#Algorithm-1" class="headerlink" title="Algorithm 1"></a>Algorithm 1</h3><p>The first algorithm is to transform the automaton model to a biparty game. It has two steps: insert transition states into the original automaton, and remove deadlocking or unsafe states. We can use DFS to find out all transitions, and generally the inserted transition states of one original state are the combination of all controllable events at that state plus the uncontrollable ones.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">DoDFS</span>(<span class="params">y, X, x0, f, Ec, Euc, w, Qy, Qz, G, fyz, fzy</span>):</span><br><span class="line">    gamma = []</span><br><span class="line">    tEuc = []</span><br><span class="line">    tEc = []</span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> f:</span><br><span class="line">        <span class="keyword">if</span> t[<span class="number">1</span>] == y:</span><br><span class="line">            <span class="keyword">if</span> t[<span class="number">0</span>] <span class="keyword">in</span> Euc:</span><br><span class="line">                tEuc.append(t[<span class="number">0</span>])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tEc.append(t[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(tEuc) == <span class="number">0</span> <span class="keyword">and</span> <span class="built_in">len</span>(tEc) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(tEuc) != <span class="number">0</span> <span class="keyword">and</span> <span class="built_in">len</span>(tEc) == <span class="number">0</span>:</span><br><span class="line">        gamma.append(tEuc)</span><br><span class="line">        G.append(tEuc)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(tEuc) != <span class="number">0</span>:</span><br><span class="line">            gamma.append(tEuc)</span><br><span class="line">            G.append(tEuc)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(tEc) + <span class="number">1</span>):</span><br><span class="line">            l = <span class="built_in">list</span>(combinations(tEc, i))</span><br><span class="line">            <span class="keyword">for</span> r <span class="keyword">in</span> l:</span><br><span class="line">                gamma.append(<span class="built_in">list</span>(r) + tEuc)</span><br><span class="line">                G.append(<span class="built_in">list</span>(r) + tEuc)</span><br><span class="line">    <span class="keyword">for</span> g <span class="keyword">in</span> gamma:</span><br><span class="line">        z = [y] + g</span><br><span class="line">        fyz.append([g, y, z])</span><br><span class="line">        <span class="keyword">if</span> z <span class="keyword">not</span> <span class="keyword">in</span> Qz:</span><br><span class="line">            Qz.append(z)</span><br><span class="line">            <span class="keyword">for</span> e <span class="keyword">in</span> g:</span><br><span class="line">                yn = <span class="string">&#x27;&#x27;</span></span><br><span class="line">                <span class="keyword">for</span> t <span class="keyword">in</span> f:</span><br><span class="line">                    <span class="keyword">if</span> t[<span class="number">0</span>] == e <span class="keyword">and</span> t[<span class="number">1</span>] == y:</span><br><span class="line">                        yn = t[<span class="number">2</span>]</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">if</span> yn[<span class="number">0</span>] == <span class="string">&#x27;!&#x27;</span>:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                fzy.append([e, z, yn])</span><br><span class="line">                <span class="keyword">if</span> yn <span class="keyword">not</span> <span class="keyword">in</span> Qy:</span><br><span class="line">                    Qy.append(yn)</span><br><span class="line">                    DoDFS(yn, X, x0, f, Ec, Euc, w, Qy, Qz, G, fyz, fzy)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">removeUnsafe</span>(<span class="params">states, transitions</span>):</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> states:</span><br><span class="line">        <span class="keyword">if</span> s[<span class="number">0</span>] == <span class="string">&#x27;!&#x27;</span>:</span><br><span class="line">            <span class="keyword">for</span> t <span class="keyword">in</span> transitions:</span><br><span class="line">                <span class="keyword">if</span> t[<span class="number">1</span>] == s <span class="keyword">or</span> t[<span class="number">2</span>] == s:</span><br><span class="line">                    transitions.remove(t)</span><br><span class="line">            states.remove(s)</span><br></pre></td></tr></table></figure>

<p><img src="/photo/supervisory-control-02.jpg"></p>
<h3 id="Algorithm-2"><a href="#Algorithm-2" class="headerlink" title="Algorithm 2"></a>Algorithm 2</h3><p>The second algorithm is to find the supervisor’s winning region. It first calculates the window mean payoff function which tracks the best worst-case accumulative weights that the supervisor may achieve from a state within N event occurrences (window size). Then the goal equivalents to adopting a control strategy to obtain a nonnegative accumulative payoff while the environment aims to spoil that goal by enforcing negative payoffs. We can use divide-and-conquer to find out all stable windows where the local window mean payoffs are all nonnegative. The example has a window size of three.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">StableWindow</span>(<span class="params">Qy, Qz, fyz, fzy, w, N</span>):</span><br><span class="line">    wgr = []</span><br><span class="line">    h = &#123;&#125;</span><br><span class="line">    h[<span class="number">0</span>] = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> q <span class="keyword">in</span> Qy + Qz:</span><br><span class="line">        h[<span class="number">0</span>][<span class="built_in">str</span>(q)] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, N+<span class="number">1</span>):</span><br><span class="line">        h[i] = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> q <span class="keyword">in</span> Qz:</span><br><span class="line">            ey = [[element[<span class="number">0</span>], element[<span class="number">2</span>]]</span><br><span class="line">                  <span class="keyword">for</span> element <span class="keyword">in</span> fzy <span class="keyword">if</span> element[<span class="number">1</span>] == q <span class="keyword">and</span> element[<span class="number">2</span>] <span class="keyword">in</span> Qy]</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(ey) != <span class="number">0</span>:</span><br><span class="line">                ystates = []</span><br><span class="line">                <span class="keyword">for</span> y <span class="keyword">in</span> ey:</span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">str</span>(y[<span class="number">1</span>]) <span class="keyword">in</span> h[i - <span class="number">1</span>].keys():</span><br><span class="line">                        ystates.append(y)</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(ystates) != <span class="number">0</span>:</span><br><span class="line">                    h[i][<span class="built_in">str</span>(q)] = <span class="built_in">min</span>([w[t[<span class="number">0</span>]] + h[i - <span class="number">1</span>][<span class="built_in">str</span>(t[<span class="number">1</span>])]</span><br><span class="line">                                        <span class="keyword">for</span> t <span class="keyword">in</span> ystates])</span><br><span class="line">                    <span class="keyword">if</span> h[i][<span class="built_in">str</span>(q)] &gt;= <span class="number">0</span>:</span><br><span class="line">                        wgr.append(q)</span><br><span class="line">        <span class="keyword">for</span> q <span class="keyword">in</span> Qy:</span><br><span class="line">            ytz = [element[<span class="number">2</span>]</span><br><span class="line">                   <span class="keyword">for</span> element <span class="keyword">in</span> fyz <span class="keyword">if</span> element[<span class="number">1</span>] == q <span class="keyword">and</span> element[<span class="number">2</span>] <span class="keyword">in</span> Qz]</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(ytz) != <span class="number">0</span>:</span><br><span class="line">                zstates = []</span><br><span class="line">                <span class="keyword">for</span> z <span class="keyword">in</span> ytz:</span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">str</span>(z) <span class="keyword">in</span> h[i].keys():</span><br><span class="line">                        zstates.append(z)</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(zstates) != <span class="number">0</span>:</span><br><span class="line">                    h[i][<span class="built_in">str</span>(q)] = <span class="built_in">max</span>([h[i][<span class="built_in">str</span>(z)] <span class="keyword">for</span> z <span class="keyword">in</span> zstates])</span><br><span class="line">                    <span class="keyword">if</span> h[i][<span class="built_in">str</span>(q)] &gt;= <span class="number">0</span>:</span><br><span class="line">                        wgr.append(q)</span><br><span class="line">    wg = []</span><br><span class="line">    [wg.append(q) <span class="keyword">for</span> q <span class="keyword">in</span> wgr <span class="keyword">if</span> <span class="keyword">not</span> q <span class="keyword">in</span> wg]</span><br><span class="line">    <span class="keyword">return</span> wg</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">WinLocal</span>(<span class="params">Qy, Qz, fyz, fzy, w, N</span>):</span><br><span class="line">    wg = StableWindow(Qy, Qz, fyz, fzy, w, N)</span><br><span class="line">    wp = []</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(wg) == <span class="built_in">len</span>(Qy + Qz) <span class="keyword">or</span> <span class="built_in">len</span>(wg) == <span class="number">0</span>:</span><br><span class="line">        wp = wg</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        Qyn = []</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> Qy:</span><br><span class="line">            <span class="keyword">if</span> y <span class="keyword">in</span> wg:</span><br><span class="line">                Qyn.append(y)</span><br><span class="line">        Qzn = []</span><br><span class="line">        <span class="keyword">for</span> z <span class="keyword">in</span> Qz:</span><br><span class="line">            <span class="keyword">if</span> z <span class="keyword">in</span> wg:</span><br><span class="line">                Qzn.append(z)</span><br><span class="line">        wp = WinLocal(Qyn, Qzn, fyz, fzy, w, N)</span><br><span class="line">    <span class="keyword">return</span> wp</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">attraction</span>(<span class="params">attr, s0, Q, f, wp</span>):</span><br><span class="line">    <span class="keyword">if</span> s0 <span class="keyword">in</span> wp:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> f:</span><br><span class="line">            <span class="keyword">if</span> i[<span class="number">1</span>] == s0:</span><br><span class="line">                res.append(attraction(attr, i[<span class="number">2</span>], Q, f, wp))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">            <span class="keyword">if</span> i == <span class="literal">False</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        attr.append(s0)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">winRegion</span>(<span class="params">Qy, Qz, fyz, fzy, w, N, y0, wl</span>):</span><br><span class="line">    ws = []</span><br><span class="line">    n = <span class="number">1</span></span><br><span class="line">    Qyw = [y <span class="keyword">for</span> y <span class="keyword">in</span> Qy]</span><br><span class="line">    Qzw = [z <span class="keyword">for</span> z <span class="keyword">in</span> Qz]</span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(ws) != <span class="built_in">len</span>(Qy + Qz):</span><br><span class="line">        wp = WinLocal(Qyw, Qzw, fyz, fzy, w, N)</span><br><span class="line">        wl += wp</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(wp) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        attrr = []</span><br><span class="line">        _ = attraction(attrr, y0, Qy + Qz, fzy + fyz, wp)</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> wp + attrr:</span><br><span class="line">            <span class="keyword">if</span> p <span class="keyword">not</span> <span class="keyword">in</span> ws:</span><br><span class="line">                ws.append(p)</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> Qyw:</span><br><span class="line">            <span class="keyword">if</span> y <span class="keyword">in</span> ws:</span><br><span class="line">                Qyw.remove(y)</span><br><span class="line">        <span class="keyword">for</span> z <span class="keyword">in</span> Qzw:</span><br><span class="line">            <span class="keyword">if</span> z <span class="keyword">in</span> ws:</span><br><span class="line">                Qzw.remove(z)</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> ws</span><br></pre></td></tr></table></figure>

<p><img src="/photo/supervisory-control-03.jpg"></p>
<h3 id="Algorithm-3"><a href="#Algorithm-3" class="headerlink" title="Algorithm 3"></a>Algorithm 3</h3><p>The third algorithm is to reconstruct and unfold the result of the second algorithm. It has two steps. The first one is to merge all stable windows in the second algorithm together, and add original states back to the automaton so that each original state has only one transit-out arrow. The second one is to remove all the inserted environment states to simplify the automaton and finally give a stable workflow.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">Unfold</span>(<span class="params">y0u, Qyu, Qzu, fyzu, fzyu, Qy, Qz, fyz, fzy</span>):</span><br><span class="line">    duplicate = &#123;&#125;</span><br><span class="line">    lru = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> Qy:</span><br><span class="line">        duplicate[i] = <span class="number">1</span></span><br><span class="line">        lru[i] = <span class="number">0</span></span><br><span class="line">    state = y0u</span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(Qzu) &lt; <span class="built_in">len</span>(Qz):</span><br><span class="line">        du = <span class="literal">False</span></span><br><span class="line">        sn = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> state <span class="keyword">in</span> Qyu:</span><br><span class="line">            <span class="keyword">if</span> duplicate[state] != <span class="number">1</span>:</span><br><span class="line">                du = <span class="literal">True</span></span><br><span class="line">                sn = <span class="string">&#x27;&#123;&#x27;</span>+state+<span class="string">&#x27;&#125;&#x27;</span>+<span class="built_in">str</span>(lru[state])</span><br><span class="line">                <span class="keyword">if</span> lru[state] != <span class="number">0</span>:</span><br><span class="line">                    Qyu.append(sn)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            Qyu.append(state)</span><br><span class="line">            d = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> fyz:</span><br><span class="line">                <span class="keyword">if</span> i[<span class="number">1</span>] == state:</span><br><span class="line">                    d += <span class="number">1</span></span><br><span class="line">            duplicate[state] = d</span><br><span class="line">        lru[state] = (lru[state] + <span class="number">1</span>) % duplicate[state]</span><br><span class="line">        temp = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> fyz:</span><br><span class="line">            <span class="keyword">if</span> i[<span class="number">1</span>] == state <span class="keyword">and</span> i[<span class="number">2</span>] <span class="keyword">not</span> <span class="keyword">in</span> Qzu:</span><br><span class="line">                temp.append(i)</span><br><span class="line">        z = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(temp) == <span class="number">1</span>:</span><br><span class="line">            z = temp[<span class="number">0</span>][<span class="number">2</span>]</span><br><span class="line">            Qzu.append(z)</span><br><span class="line">            <span class="keyword">if</span> du == <span class="literal">False</span>:</span><br><span class="line">                fyzu.append(temp[<span class="number">0</span>])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                fyzu.append([temp[<span class="number">0</span>][<span class="number">0</span>], sn, z])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            t = [<span class="built_in">len</span>(i[<span class="number">2</span>]) <span class="keyword">for</span> i <span class="keyword">in</span> temp]</span><br><span class="line">            yz = temp[t.index(<span class="built_in">max</span>(t))]</span><br><span class="line">            z = yz[<span class="number">2</span>]</span><br><span class="line">            Qzu.append(z)</span><br><span class="line">            <span class="keyword">if</span> du == <span class="literal">False</span>:</span><br><span class="line">                fyzu.append(yz)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                fyzu.append([yz[<span class="number">0</span>], sn, z])</span><br><span class="line">        y = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> fzy:</span><br><span class="line">            <span class="keyword">if</span> i[<span class="number">1</span>] == z:</span><br><span class="line">                <span class="keyword">if</span> lru[i[<span class="number">2</span>]] == <span class="number">0</span>:</span><br><span class="line">                    fzyu.append(i)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    fzyu.append([i[<span class="number">0</span>], i[<span class="number">1</span>], <span class="string">&#x27;&#123;&#x27;</span>+i[<span class="number">2</span>]+<span class="string">&#x27;&#125;&#x27;</span>+<span class="built_in">str</span>(lru[i[<span class="number">2</span>]])])</span><br><span class="line">                y.append(i[<span class="number">2</span>])</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(y) == <span class="number">1</span>:</span><br><span class="line">            state = y[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            yin = []</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> y:</span><br><span class="line">                <span class="keyword">if</span> i <span class="keyword">not</span> <span class="keyword">in</span> Qyu:</span><br><span class="line">                    yin.append(i)</span><br><span class="line">            num = []</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(yin) == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> y:</span><br><span class="line">                    count = <span class="number">0</span></span><br><span class="line">                    <span class="keyword">for</span> j <span class="keyword">in</span> fzy:</span><br><span class="line">                        <span class="keyword">if</span> j[<span class="number">2</span>] == i:</span><br><span class="line">                            count += <span class="number">1</span></span><br><span class="line">                    num.append(count)</span><br><span class="line">                state = y[num.index(<span class="built_in">min</span>(num))]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> yin:</span><br><span class="line">                    count = <span class="number">0</span></span><br><span class="line">                    <span class="keyword">for</span> j <span class="keyword">in</span> fzy:</span><br><span class="line">                        <span class="keyword">if</span> j[<span class="number">2</span>] == i:</span><br><span class="line">                            count += <span class="number">1</span></span><br><span class="line">                    num.append(count)</span><br><span class="line">                state = y[num.index(<span class="built_in">min</span>(num))]</span><br></pre></td></tr></table></figure>

<p><img src="/photo/supervisory-control-04.jpg"></p>
<p><img src="/photo/supervisory-control-05.jpg"></p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/07/18/sjtucapstonedesign/" rel="prev" title="Control of Virtual and Real Manufacturing Systems in AR/VR">
                  <i class="fa fa-chevron-left"></i> Control of Virtual and Real Manufacturing Systems in AR/VR
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/07/21/puertorico/" rel="next" title="Puerto Rico">
                  Puerto Rico <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhiqi Chen</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  



  <script src="/js/third-party/fancybox.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.1/es5/tex-mml-chtml.js","integrity":"sha256-hlC2uSQYTmPsrzGZTEQEg9PZ1a/+SV6VBCTclohf2og="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
