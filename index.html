<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.8.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="Zhiqi Chen">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Zhiqi Chen">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Zhiqi Chen">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Zhiqi Chen</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Zhiqi Chen</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Story</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-travel"><a href="/categories/travel/" rel="section"><i class="fa fa-map fa-fw"></i>travel</a></li>
        <li class="menu-item menu-item-game"><a href="/categories/game/" rel="section"><i class="fa fa-gamepad fa-fw"></i>game</a></li>
        <li class="menu-item menu-item-project"><a href="/categories/project/" rel="section"><i class="fa fa-code fa-fw"></i>project</a></li>
        <li class="menu-item menu-item-caprice"><a href="/categories/caprice/" rel="section"><i class="fa fa-music fa-fw"></i>caprice</a></li>
        <li class="menu-item menu-item-raving"><a href="/categories/raving/" rel="section"><i class="fa fa-leaf fa-fw"></i>raving</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Zhiqi Chen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">43</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/zhiqich" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zhiqich" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:abraxas.zhiqich@gmail.com" title="E-Mail → mailto:abraxas.zhiqich@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/05/florida/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/05/florida/" class="post-title-link" itemprop="url">Florida</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-01-05 22:55:13 / Modified: 23:08:07" itemprop="dateCreated datePublished" datetime="2022-01-05T22:55:13-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/travel/" itemprop="url" rel="index"><span itemprop="name">travel</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="/photo/florida-01.jpg"></p>
<p><img src="/photo/florida-02.jpg"></p>
<p><img src="/photo/florida-03.jpg"></p>
<p><img src="/photo/florida-04.jpg"></p>
<p><img src="/photo/florida-05.jpg"></p>
<p><img src="/photo/florida-06.jpg"></p>
<p><img src="/photo/florida-07.jpg"></p>
<p><img src="/photo/florida-08.jpg"></p>
<p><img src="/photo/florida-09.jpg"></p>
<p><img src="/photo/florida-10.jpg"></p>
<p><img src="/photo/florida-11.jpg"></p>
<p><img src="/photo/florida-12.jpg"></p>
<p><img src="/photo/florida-13.jpg"></p>
<p><img src="/photo/florida-14.jpg"></p>
<p><img src="/photo/florida-15.jpg"></p>
<p><img src="/photo/florida-16.jpg"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/08/07/12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/08/07/12/" class="post-title-link" itemprop="url">12</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-08-07 20:54:37" itemprop="dateCreated datePublished" datetime="2021-08-07T20:54:37-04:00">2021-08-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-05 21:41:32" itemprop="dateModified" datetime="2022-01-05T21:41:32-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/raving/" itemprop="url" rel="index"><span itemprop="name">raving</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>2021年8月4日下午，从上海启程前往亚特兰大。因为南京的疫情，许多国内航班都被取消了，浦东机场显得有些空落落。候机大厅里只有两家商店还开着，卖一点零食方便面之类的。航班经停首尔，目的地阿姆斯特丹，原本预计20:30起飞，由于防疫相关的消毒和检查被推迟了半小时。旅客大多是国人，不少都穿着防护服，临登机前互相检查穿戴，询问各自旅程的最终目的地。飞机上邻座是一个大二学生，十几个同学一起去柏林留学，第一次乘坐国际航班的兴奋溢于言表。</p>
<p>航班飞过赫尔辛基和斯德哥尔摩，在奥斯陆和哥德堡转向，在当地时间凌晨四点多抵达阿姆斯特丹。第一次踏足欧洲脑海里有很多想象，看着大屏幕上的航班信息，幻想着飞往伦敦、巴黎、布拉格……在机场看了日出，买了咖啡和麦当劳填了肚子，看了一整天的小说。</p>
<p>17:00起飞前往亚特兰大，20:30落地。取完行李乘shuttle bus到地铁站，22:00到住处。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=530 height=86 src="//music.163.com/outchain/player?type=2&id=3027823&auto=0&height=66"></iframe>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/31/whichmed2get/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/31/whichmed2get/" class="post-title-link" itemprop="url">WhichMed2Get</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-31 13:50:20" itemprop="dateCreated datePublished" datetime="2021-03-31T13:50:20-04:00">2021-03-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-05 12:25:33" itemprop="dateModified" datetime="2022-01-05T12:25:33-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/project/" itemprop="url" rel="index"><span itemprop="name">project</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <script>
    function queryDB() {
        var keyword = document.getElementById('medicine').value;
        if (keyword == null || keyword == undefined || keyword == '') {
            keyword = "***";
            document.getElementById("demo").innerHTML = "";
        }
        else {
            var mode = document.getElementById("mode").selectedIndex;
            // console.log(mode);
            var qUrl;
            switch (mode) {
                case 0:
                    qUrl = 'med-en-cn.php?'
                    break;
                case 1:
                    qUrl = 'med-cn-en.php?';
                    break;
                case 2:
                    qUrl = 'vaccination-en-cn.php?'
                    break;
                case 3:
                    qUrl = 'vaccination-cn-en.php?';
                    break;
                case 4:
                    qUrl = 'med-dict-en-cn.php?'
                    break;
                case 5:
                    qUrl = 'med-dict-cn-en.php?';
                    break;
                case 6:
                    qUrl = 'vax-url.php?';
                    break;
                default:
                    break;
            }
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    console.log(xhr.responseText);
                    document.getElementById("demo").innerHTML = xhr.responseText;
                } else {
                    console.log(xhr.statusText);
                    document.getElementById("demo").innerHTML = "error";
                }
            };
            xhr.onerror = function (e) {
                console.error(xhr.statusText);
            };
            xhr.open('GET', 'https://zhiqich.ngrok.io/phpmyadmin/WhichMed2Get/' + qUrl + keyword, true);
            xhr.send(null);
        }
    };
</script>

<style type="text/css">
    .search {
        width: 100%;
        position: relative;
        display: flex;
    }

    .searchTerm {
        width: 100%;
        border: 3px solid #00B4CC;
        border-right: none;
        padding: 5px;
        height: 20px;
        border-radius: 5px 0 0 5px;
        outline: none;
        color: #9DBFAF;
    }

    .searchTerm:focus {
        color: #00B4CC;
    }

    .searchButton {
        width: 40px;
        height: 36px;
        border: 1px solid #00B4CC;
        background: #00B4CC;
        text-align: center;
        color: #fff;
        border-radius: 0 5px 5px 0;
        cursor: pointer;
        font-size: 20px;
    }

    .wrap {
        width: 50%;
        position: absolute;
        /* top: 50%; */
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
    }

    .switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        -webkit-transition: .4s;
        transition: .4s;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        -webkit-transition: .4s;
        transition: .4s;
    }

    input:checked + .slider {
        background-color: #00B4CC;
    }

    input:focus + .slider {
        box-shadow: 0 0 1px #00B4CC;
    }

    input:checked + .slider:before {
        -webkit-transform: translateX(26px);
        -ms-transform: translateX(26px);
        transform: translateX(26px);
    }

    .slider.round {
        border-radius: 34px;
    }

    .slider.round:before {
        border-radius: 50%;
    }
</style>

<div class="wrap">
    <div class="search">
        <!-- <input type="text" id="medicine" class="searchTerm" placeholder="What medicine are you looking for?"> -->
        <input type="text" id="medicine" class="searchTerm" placeholder="WhichMed2Get">
        <button type="submit" onclick="queryDB();" class="searchButton">
            <i class="fa fa-search"></i>
        </button>
   </div>
</div>

<!-- <center>
    <label class="switch">
        <input type="checkbox">
        <span class="slider"></span>
    </label>
</center> -->

<div>
    <p></br></p>
</div>

<center>
    <div>
        <select name="mode" id="mode">
            <option value="en2cn">Commonly Used Drugs En to Cn</option>
            <option value="cn2en">常用药中译英</option>
            <option value="ven2cn">Vax En to Cn</option>
            <option value="vcn2en">疫苗中译英</option>
            <option value="mden2cn">Medical Dictionary En to Cn</option>
            <option value="mdcn2en">医药词典中译英</option>
            <option value="vurl">Vax with info link</option>
        </select>
    </div>
</center>

<div>
    <p></br></p>
</div>

<div>
    <p id="demo"></p>
</div>

<!-- <div>
    <p></br></p>
</div> -->

<!-- <center><i><font color = gray></font></i></center> -->
<center><i><font color = gray>Information provided is for general informational purposes only. No representation or warranty of any kind.</font></i></center>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/25/11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/25/11/" class="post-title-link" itemprop="url">11</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-25 22:28:22" itemprop="dateCreated datePublished" datetime="2021-03-25T22:28:22-04:00">2021-03-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-05 11:52:13" itemprop="dateModified" datetime="2022-01-05T11:52:13-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/raving/" itemprop="url" rel="index"><span itemprop="name">raving</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <center><i><font color = gray>《姐姐，今夜我在德令哈》 海子</font></i></center>

<p>姐姐，今夜我在德令哈，夜色笼罩<br>姐姐，我今夜只有戈壁</p>
<p>草原尽头我两手空空<br>悲痛时握不住一颗泪滴<br>姐姐，今夜我在德令哈<br>这是雨水中一座荒凉的城</p>
<p>除了那些路过的和居住的<br>德令哈……今夜<br>这是唯一的，最后的，抒情。<br>这是唯一的，最后的，草原。</p>
<p>我把石头还给石头<br>让胜利的胜利<br>今夜青稞只属于他自己<br>一切都在生长</p>
<p>今夜我只有美丽的戈壁 空空<br>姐姐，今夜我不关心人类，我只想你。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/18/iptrackingtest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/18/iptrackingtest/" class="post-title-link" itemprop="url">IP Tracking Test</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-18 23:37:34" itemprop="dateCreated datePublished" datetime="2021-03-18T23:37:34-04:00">2021-03-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-05 12:21:33" itemprop="dateModified" datetime="2022-01-05T12:21:33-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/project/" itemprop="url" rel="index"><span itemprop="name">project</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          Here's something encrypted, password is required to continue reading.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/03/18/iptrackingtest/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/18/spark/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/18/spark/" class="post-title-link" itemprop="url">Learning Configuring Spark Jobs</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-18 23:26:49" itemprop="dateCreated datePublished" datetime="2021-03-18T23:26:49-04:00">2021-03-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-05 12:23:36" itemprop="dateModified" datetime="2022-01-05T12:23:36-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/project/" itemprop="url" rel="index"><span itemprop="name">project</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Go to official Apache Spark download <a target="_blank" rel="noopener" href="https://spark.apache.org/downloads.html">webpage</a> and select Spark release version 3.1.1 and package type Source Code. Unzip the downloaded package and build Spark by Apache Maven.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./build/mvn -DskipTests clean package</span><br></pre></td></tr></table></figure>
<h2 id="Example-Programs"><a href="#Example-Programs" class="headerlink" title="Example Programs"></a>Example Programs</h2><h3 id="SparkPi"><a href="#SparkPi" class="headerlink" title="SparkPi"></a>SparkPi</h3><p>SparkPi is a compute-intensive task which estimates <code>pi</code> by “throwing darts” at a circle. Random points in the unit square ((0, 0) to (1,1)) are picked and we can see how many fall in the unit circle. The fraction should be <code>pi/4</code>, so we use this to get the estimate.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Usage: pi [partitions]</span></span><br><span class="line">./bin/run-example SparkPi 10/1000/10000</span><br></pre></td></tr></table></figure>
<p>For 10 partitions, the <code>pi</code> estimation is roughly 3.1392951, and the running time is 0.496385s. For 100 partitions, the <code>pi</code> estimation is roughly 3.1413819, and the running time is 3.576282s. For 1000 partitions, the <code>pi</code> estimation is roughly 3.1416965, and the running time is 43.483414s. For 10000 partitions, the <code>pi</code> estimation is roughly 3.1415915, and the running time is 363.989005s.</p>
<h3 id="WordCount"><a href="#WordCount" class="headerlink" title="WordCount"></a>WordCount</h3><h4 id="Dataset"><a href="#Dataset" class="headerlink" title="Dataset"></a>Dataset</h4><h5 id="Gutenberg"><a href="#Gutenberg" class="headerlink" title="Gutenberg"></a>Gutenberg</h5><p>To get big quantities of text without repetition, I crawl text files from Project Gutenberg.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Create directory</span></span><br><span class="line">mkdir Download/temp/</span><br><span class="line">cd Download/temp/</span><br><span class="line"><span class="meta">#</span><span class="bash"> Crawl text files</span></span><br><span class="line">wget -bqc -w 2 -m -H &#x27;http://www.gutenberg.org/robot/harvest?filetypes[]=txt&amp;langs[]=en&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"> Extract text data</span></span><br><span class="line">mkdir extracted/</span><br><span class="line">find . -name &#x27;*.zip&#x27; -exec sh -c &#x27;unzip -d extracted &#123;&#125;&#x27; &#x27;;&#x27;</span><br><span class="line">cat extracted/*.txt &gt; temp.txt</span><br></pre></td></tr></table></figure>
<p>After crawling text data, remove special characters from the text file and fix encoding.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">string = <span class="built_in">open</span>(<span class="string">&#x27;temp.txt&#x27;</span>, encoding = <span class="string">&quot;ISO-8859-1&quot;</span>).read()</span><br><span class="line">new_str = re.sub(<span class="string">&#x27;[^a-zA-Z0-9\n\.]&#x27;</span>, <span class="string">&#x27; &#x27;</span>, string)</span><br><span class="line"><span class="built_in">open</span>(<span class="string">&#x27;gutenberg.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>).write(new_str)</span><br></pre></td></tr></table></figure>
<h5 id="Yelp"><a href="#Yelp" class="headerlink" title="Yelp"></a>Yelp</h5><p>Download Yelp <a target="_blank" rel="noopener" href="https://www.yelp.com/dataset">dataset</a>. I will focus on the review dataset which contains big quantities of text without repetition and can work as a benchmark. Before I run the example program on the dataset, I first need to convert the JSON file into a CSV file. Since the dataset is too large, I will process the first 1000000 reviews which is almost 6GB.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">review_json_path = <span class="string">&#x27;yelp_academic_dataset_review.json&#x27;</span></span><br><span class="line">size = <span class="number">1000000</span></span><br><span class="line">review = pd.read_json(review_json_path, lines=<span class="literal">True</span>, dtype=&#123;<span class="string">&#x27;review_id&#x27;</span>: <span class="built_in">str</span>, <span class="string">&#x27;user_id&#x27;</span>: <span class="built_in">str</span>, <span class="string">&#x27;business_id&#x27;</span>: <span class="built_in">str</span>,</span><br><span class="line">                      <span class="string">&#x27;stars&#x27;</span>: <span class="built_in">int</span>, <span class="string">&#x27;date&#x27;</span>: <span class="built_in">str</span>, <span class="string">&#x27;text&#x27;</span>: <span class="built_in">str</span>, <span class="string">&#x27;useful&#x27;</span>: <span class="built_in">int</span>, <span class="string">&#x27;funny&#x27;</span>: <span class="built_in">int</span>, <span class="string">&#x27;cool&#x27;</span>: <span class="built_in">int</span>&#125;, chunksize=size)</span><br><span class="line">chunk_list = []</span><br><span class="line"><span class="keyword">for</span> chunk_review <span class="keyword">in</span> review:</span><br><span class="line">    chunk_review = chunk_review.drop(</span><br><span class="line">        [<span class="string">&#x27;review_id&#x27;</span>, <span class="string">&#x27;user_id&#x27;</span>, <span class="string">&#x27;business_id&#x27;</span>, <span class="string">&#x27;stars&#x27;</span>, <span class="string">&#x27;date&#x27;</span>, <span class="string">&#x27;useful&#x27;</span>, <span class="string">&#x27;funny&#x27;</span>, <span class="string">&#x27;cool&#x27;</span>], axis=<span class="number">1</span>)</span><br><span class="line">    chunk_list.append(chunk_review)</span><br><span class="line">df = pd.concat(chunk_list, ignore_index=<span class="literal">True</span>, join=<span class="string">&#x27;outer&#x27;</span>, axis=<span class="number">0</span>)</span><br><span class="line">csv_name = <span class="string">&quot;result.csv&quot;</span></span><br><span class="line">df.to_csv(csv_name, index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<p>After getting the CSV file, I also need to clean the data by removing special characters.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">string = <span class="built_in">open</span>(<span class="string">&#x27;yelp.csv&#x27;</span>).read()</span><br><span class="line">new_str = re.sub(<span class="string">&#x27;[^a-zA-Z0-9\n]&#x27;</span>, <span class="string">&#x27; &#x27;</span>, string)</span><br><span class="line"><span class="built_in">open</span>(<span class="string">&#x27;result.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>).write(new_str)</span><br></pre></td></tr></table></figure>
<h4 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h4><h5 id="Gutenberg-1"><a href="#Gutenberg-1" class="headerlink" title="Gutenberg"></a>Gutenberg</h5><p>Run the following command to count words in the dataset.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time ./bin/spark-submit examples/src/main/python/wordcount.py ../gutenberg.txt</span><br></pre></td></tr></table></figure>
<p>The total running time is 0m6.037s.</p>
<h5 id="Yelp-1"><a href="#Yelp-1" class="headerlink" title="Yelp"></a>Yelp</h5><p>Run the following command to count words in the dataset.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time ./bin/spark-submit examples/src/main/python/wordcount.py ../yelp.txt</span><br></pre></td></tr></table></figure>
<p>The total running time is 1m56.498s.</p>
<h2 id="Configuration-Impact"><a href="#Configuration-Impact" class="headerlink" title="Configuration Impact"></a>Configuration Impact</h2><p>I choose to run an example MapReduce program sort to see the configuration impact.</p>
<h3 id="Bug-Fix"><a href="#Bug-Fix" class="headerlink" title="Bug Fix"></a>Bug Fix</h3><p>The provided python code for the sort program has a bug in line 35. Fix it by removing the translation from string to int.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sortedCount = lines.flatMap(<span class="keyword">lambda</span> x: x.split(<span class="string">&#x27; &#x27;</span>)) \</span><br><span class="line">    .<span class="built_in">map</span>(<span class="keyword">lambda</span> x: (x, <span class="number">1</span>)) \</span><br><span class="line">    .sortByKey()</span><br></pre></td></tr></table></figure>
<h3 id="Dataset-Preparation"><a href="#Dataset-Preparation" class="headerlink" title="Dataset Preparation"></a>Dataset Preparation</h3><p>I will use the Yelp dataset as a benchmark to see the impact configuration. However, since the Yelp dataset I use in the previous section is too large (&gt;5GB), the sort program will always report buffer overflow. So, I will only run the first 500MB dataset (xaa).</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">split -b 500m yelp.txt</span><br></pre></td></tr></table></figure>
<h3 id="Configuration-File"><a href="#Configuration-File" class="headerlink" title="Configuration File"></a>Configuration File</h3><p>The configuration file of Spark is provided as a template <code>spark-defaults.conf.template</code>. To modify the configuration, first copy the template and change the name to <code>spark-defaults.conf</code>, then I can change the settings by adding properties in this file.</p>
<h3 id="Driver-Memory"><a href="#Driver-Memory" class="headerlink" title="Driver Memory"></a>Driver Memory</h3><p>The first change in the configuration is <code>spark.driver.memory</code> and <code>spark.driver.maxResultSize</code>. The <code>spark.driver.maxResultSize</code> is set to 10G which is larger than the size of the dataset to ensure the serialization can complete. The driver memory is the amount of memory to use for the driver process. I have tested four values for the driver memory: 1G, 2G, 4G and 8G. The program can run by two commands.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> config directly <span class="keyword">in</span> <span class="built_in">command</span> line</span></span><br><span class="line">time ./bin/spark-submit --driver-memory 1g examples/src/main/python/sort.py ../xaa</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> config <span class="keyword">in</span> config file</span></span><br><span class="line">time ./bin/spark-submit --properties-file conf/spark-defaults.conf examples/src/main/python/sort.py ../xaa</span><br></pre></td></tr></table></figure>
<h4 id="1G"><a href="#1G" class="headerlink" title="1G"></a>1G</h4><p>The Spark default value of driver memory is 1G. However, it’s too small for the testing dataset and the sort program will report Java heap space out of memory.</p>
<h4 id="2G"><a href="#2G" class="headerlink" title="2G"></a>2G</h4><p>After raising the driver memory to 2G, the sort program will still report Java heap space out of memory.</p>
<h4 id="4G"><a href="#4G" class="headerlink" title="4G"></a>4G</h4><p>The sort program will run successfully when the driver memory is raised to 4G. The program can correctly print out the sorted words and the total running time is 3m47.166s (including the printing time).</p>
<h4 id="8G"><a href="#8G" class="headerlink" title="8G"></a>8G</h4><p>The program can correctly print out the sorted words and the total running time is 3m47.200s (including the printing time), which is similar to 4G.</p>
<h3 id="Reducer-Size"><a href="#Reducer-Size" class="headerlink" title="Reducer Size"></a>Reducer Size</h3><p>The second property to modify is the <code>spark.reducer.maxSizeInFlight</code>. It is the maximum size of map outputs to fetch simultaneously from each reduce task. It represents a fixed memory overhead per reduce task. I would like to see if the fetch size will impact the performance. I will try three sizes: 12M, 48M, and 96M. The <code>spark.reducer.maxSizeInFlight</code> will be added to the property file and the program will run by the following command.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time ./bin/spark-submit --properties-file conf/spark-defaults.conf examples/src/main/python/sort.py ../xaa</span><br></pre></td></tr></table></figure>
<h4 id="12M"><a href="#12M" class="headerlink" title="12M"></a>12M</h4><p>The running time with 12M fetching size is 3m58.065s including the result printing time.</p>
<h4 id="48M"><a href="#48M" class="headerlink" title="48M"></a>48M</h4><p>The Spark default reducer max size in flight is 48M. The running time with 12M fetching size is 4m0.725s including the result printing time.</p>
<h4 id="96M"><a href="#96M" class="headerlink" title="96M"></a>96M</h4><p>The running time with 12M fetching size is 3m56.303s including the result printing time.</p>
<h3 id="Shuffle-Buffer"><a href="#Shuffle-Buffer" class="headerlink" title="Shuffle Buffer"></a>Shuffle Buffer</h3><p>The third property to change is the <code>spark.shuffle.file.buffer</code>. It is the size of the in-memory buffer for each shuffle file output stream. The buffers can reduce the number of disk seeks and system calls made in creating intermediate shuffle files so that larger buffers can theoretically result in better performance. I will try three different buffer sizes: 8K, 32K, and 1M. The following is the running command.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time ./bin/spark-submit --properties-file conf/spark-defaults.conf examples/src/main/python/sort.py ../xaa</span><br></pre></td></tr></table></figure>
<h4 id="8K"><a href="#8K" class="headerlink" title="8K"></a>8K</h4><p>The running time for 8K shuffle buffer is 3m55.807s including result printing time.</p>
<h4 id="32K"><a href="#32K" class="headerlink" title="32K"></a>32K</h4><p>32K is the Spark default value for shuffle file buffer. The running time for 8K shuffle buffer is 3m59.308s including result printing time.</p>
<h4 id="1M"><a href="#1M" class="headerlink" title="1M"></a>1M</h4><p>The running time for 8K shuffle buffer is 3m59.725s including result printing time.</p>
<h3 id="Serializer"><a href="#Serializer" class="headerlink" title="Serializer"></a>Serializer</h3><p>The fourth property to change is the <code>spark.serializer</code>. It is the class to use for serializing objects that will be sent over the network or need to be cached in serialized form. It is said that the default serializer <code>JavaSerializer</code> doesn’t perform well enough. I will try two different buffer sizes: default one and <code>KryoSerializer</code>. The following is the running command.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time ./bin/spark-submit --properties-file conf/spark-defaults.conf examples/src/main/python/sort.py ../xaa</span><br></pre></td></tr></table></figure>
<h4 id="JavaSerializer"><a href="#JavaSerializer" class="headerlink" title="JavaSerializer"></a>JavaSerializer</h4><p>The running time without printing out results for default serializer is 6.6012s.</p>
<h4 id="KryoSerializer"><a href="#KryoSerializer" class="headerlink" title="KryoSerializer"></a>KryoSerializer</h4><p>The running time without printing out results for default serializer is 6.5324s. In order to run the program without buffer overflow, I set the <code>spark.kryoserializer.buffer.max</code> to 2047M.</p>
<h3 id="Thread-Number"><a href="#Thread-Number" class="headerlink" title="Thread Number"></a>Thread Number</h3><p>Since I am running Spark on local mode, I can’t control how many cores the program uses to run the benchmark, but I can set how many threads the local program is running on within the limit of the number of logical cores of the device. I have tried five different thread number: 1, 2, 4, 8 and 12. The default thread number is 2. The following is the command running the program.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time ./bin/spark-submit --master local[1] --properties-file conf/spark-defaults.conf examples/src/main/python/sort.py ../xaa</span><br></pre></td></tr></table></figure>
<h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><table>
<thead>
<tr>
<th>Thread Number</th>
<th>Running Time</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>32.909s</td>
</tr>
<tr>
<td>2</td>
<td>18.484s</td>
</tr>
<tr>
<td>4</td>
<td>9.565s</td>
</tr>
<tr>
<td>8</td>
<td>7.100s</td>
</tr>
<tr>
<td>12</td>
<td>6.570s</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/08/10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/08/10/" class="post-title-link" itemprop="url">10</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-08 00:01:02" itemprop="dateCreated datePublished" datetime="2021-03-08T00:01:02-05:00">2021-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-05 11:51:30" itemprop="dateModified" datetime="2022-01-05T11:51:30-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/raving/" itemprop="url" rel="index"><span itemprop="name">raving</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          Here's something encrypted, password is required to continue reading.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/03/08/10/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/06/hyperledgerfabric/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/06/hyperledgerfabric/" class="post-title-link" itemprop="url">Hyperledger Fabric</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-06 18:27:26" itemprop="dateCreated datePublished" datetime="2021-03-06T18:27:26-05:00">2021-03-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-05 12:20:46" itemprop="dateModified" datetime="2022-01-05T12:20:46-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/project/" itemprop="url" rel="index"><span itemprop="name">project</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Hyperledger Fabric is an open source enterprise-grade permissioned distributed ledger technology (DLT) platform, designed for use in enterprise contexts. It is the first distributed ledger platform to support smart contracts authored in general-purpose programming languages such as Java, Go and Node.js, rather than constrained domain-specific languages (DSL).</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h3 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite"></a>Prerequisite</h3><h4 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br></pre></td></tr></table></figure>
<h4 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure>
<h4 id="cURL"><a href="#cURL" class="headerlink" title="cURL"></a>cURL</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install curl</span><br></pre></td></tr></table></figure>
<h4 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -y install docker-compose</span><br></pre></td></tr></table></figure>
<p>Confirm installation and version.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zhiqich@ubuntu:~$ docker --version</span><br><span class="line">Docker version 19.03.8, build afacb8b7f0</span><br><span class="line">zhiqich@ubuntu:~$ docker-compose --version</span><br><span class="line">docker-compose version 1.25.0, build unknown</span><br></pre></td></tr></table></figure>
<p>Start Docker daemon and add user to Docker group.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br><span class="line">sudo systemctl enable docker</span><br><span class="line">sudo usermod -a -G docker zhiqich</span><br></pre></td></tr></table></figure>
<h4 id="Optional-Go"><a href="#Optional-Go" class="headerlink" title="(Optional) Go"></a>(Optional) Go</h4><p><a target="_blank" rel="noopener" href="https://golang.org/dl/go1.16.linux-amd64.tar.gz">Download</a> Linux Go installer from Go official webpage.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://golang.org/dl/go1.16.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure>
<p>Extract package into <code>/usr/local</code> (or other location such as <code>$HOME</code>) and create a Go tree.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -C /usr/local -xzf go1.16.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure>
<p>Add <code>/usr/local/go/bin</code> to the <code>PATH</code> environment variable.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim $HOME/.profile</span><br><span class="line">export PATH=$PATH:/usr/local/go/bin</span><br></pre></td></tr></table></figure>
<p>Apply change and confirm installation.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source $HOME/.profile</span><br><span class="line">go version</span><br></pre></td></tr></table></figure>
<h4 id="Optional-JQ"><a href="#Optional-JQ" class="headerlink" title="(Optional) JQ"></a>(Optional) JQ</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install jq</span><br></pre></td></tr></table></figure>
<h3 id="Fabric-Sample"><a href="#Fabric-Sample" class="headerlink" title="Fabric Sample"></a>Fabric Sample</h3><p>Download <code>fabric-samples</code> and related Docker images and binaries.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://bit.ly/2ysbOFE | bash -s</span><br></pre></td></tr></table></figure>
<p>If Go language is preferred, install Fabric under Go directory, or set GOPATH to Go workspace.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p $HOME/go/src/github.com/zhiqich</span><br><span class="line">cd $HOME/go/src/github.com/zhiqich</span><br></pre></td></tr></table></figure>
<h3 id="Fabric-Application-SDK"><a href="#Fabric-Application-SDK" class="headerlink" title="Fabric Application SDK"></a>Fabric Application SDK</h3><h4 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nodejs</span><br><span class="line">sudo apt install npm</span><br></pre></td></tr></table></figure>
<h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openjdk-8-jre-headless</span><br></pre></td></tr></table></figure>
<h2 id="Run-Fabric"><a href="#Run-Fabric" class="headerlink" title="Run Fabric"></a>Run Fabric</h2><h3 id="Test-Network"><a href="#Test-Network" class="headerlink" title="Test Network"></a>Test Network</h3><h4 id="Bring-Up-Test-Network"><a href="#Bring-Up-Test-Network" class="headerlink" title="Bring Up Test Network"></a>Bring Up Test Network</h4><p>Annotated script <code>network.sh</code> in directory <code>test-network</code> stands up a Fabric network using Docker images.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd fabric-samples/test-network</span><br><span class="line">./network.sh -h</span><br></pre></td></tr></table></figure>
<p>Usage of <code>network.sh</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">Usage: </span><br><span class="line">  network.sh &lt;Mode&gt; [Flags]</span><br><span class="line">    Modes:</span><br><span class="line">      up - Bring up Fabric orderer and peer nodes. No channel is created</span><br><span class="line">      up createChannel - Bring up fabric network with one channel</span><br><span class="line">      createChannel - Create and join a channel after the network is created</span><br><span class="line">      deployCC - Deploy a chaincode to a channel (defaults to asset-transfer-basic)</span><br><span class="line">      down - Bring down the network</span><br><span class="line"></span><br><span class="line">    Flags:</span><br><span class="line">    Used with network.sh up, network.sh createChannel:</span><br><span class="line">    -ca &lt;use CAs&gt; -  Use Certificate Authorities to generate network crypto material</span><br><span class="line">    -c &lt;channel name&gt; - Name of channel to create (defaults to &quot;mychannel&quot;)</span><br><span class="line">    -s &lt;dbtype&gt; - Peer state database to deploy: goleveldb (default) or couchdb</span><br><span class="line">    -r &lt;max retry&gt; - CLI times out after certain number of attempts (defaults to 5)</span><br><span class="line">    -d &lt;delay&gt; - CLI delays for a certain number of seconds (defaults to 3)</span><br><span class="line">    -verbose - Verbose mode</span><br><span class="line"></span><br><span class="line">    Used with network.sh deployCC</span><br><span class="line">    -c &lt;channel name&gt; - Name of channel to deploy chaincode to</span><br><span class="line">    -ccn &lt;name&gt; - Chaincode name.</span><br><span class="line">    -ccl &lt;language&gt; - Programming language of the chaincode to deploy: go, java, javascript, typescript</span><br><span class="line">    -ccv &lt;version&gt;  - Chaincode version. 1.0 (default), v2, version3.x, etc</span><br><span class="line">    -ccs &lt;sequence&gt;  - Chaincode definition sequence. Must be an integer, 1 (default), 2, 3, etc</span><br><span class="line">    -ccp &lt;path&gt;  - File path to the chaincode.</span><br><span class="line">    -ccep &lt;policy&gt;  - (Optional) Chaincode endorsement policy using signature policy syntax. The default policy requires an endorsement from Org1 and Org2</span><br><span class="line">    -cccg &lt;collection-config&gt;  - (Optional) File path to private data collections configuration file</span><br><span class="line">    -cci &lt;fcn name&gt;  - (Optional) Name of chaincode initialization function. When a function is provided, the execution of init will be requested and the function will be invoked.</span><br><span class="line"></span><br><span class="line">    -h - Print this message</span><br><span class="line"></span><br><span class="line"> Possible Mode and flag combinations</span><br><span class="line">   up -ca -r -d -s -verbose</span><br><span class="line">   up createChannel -ca -c -r -d -s -verbose</span><br><span class="line">   createChannel -c -r -d -verbose</span><br><span class="line">   deployCC -ccn -ccl -ccv -ccs -ccp -cci -r -d -verbose</span><br><span class="line"></span><br><span class="line"> Examples:</span><br><span class="line">   network.sh up createChannel -ca -c mychannel -s couchdb</span><br><span class="line">   network.sh createChannel -c channelName</span><br><span class="line">   network.sh deployCC -ccn basic -ccp ../asset-transfer-basic/chaincode-javascript/ -ccl javascript</span><br><span class="line">   network.sh deployCC -ccn mychaincode -ccp ./user/mychaincode -ccv 1 -ccl javascript</span><br></pre></td></tr></table></figure>
<p>Turn down and remove any container or artifact from previous runs. Then bring up new network.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./network.sh down</span><br><span class="line">./network.sh up</span><br></pre></td></tr></table></figure>
<p>Bring up network with certificate authorities by flag <code>-ca</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh up -ca</span><br></pre></td></tr></table></figure>
<p>Check running Docker containers and components of test network.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>
<h4 id="Create-Channel"><a href="#Create-Channel" class="headerlink" title="Create Channel"></a>Create Channel</h4><p>Create channel with default name of <code>mychannel</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh createChannel</span><br></pre></td></tr></table></figure>
<p>Create channel with custom name by flag <code>-c</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh createChannel -c channel</span><br></pre></td></tr></table></figure>
<h4 id="Start-Chaincode"><a href="#Start-Chaincode" class="headerlink" title="Start Chaincode"></a>Start Chaincode</h4><p>Start a chain code on channel through preferred SDK (Java, Go, Javascript).</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh deployCC -ccn basic -ccp ../asset-transfer-basic/chaincode-go -ccl go</span><br></pre></td></tr></table></figure>
<h3 id="Fabric-Application"><a href="#Fabric-Application" class="headerlink" title="Fabric Application"></a>Fabric Application</h3><h4 id="Introduction-1"><a href="#Introduction-1" class="headerlink" title="Introduction"></a>Introduction</h4><p>The tutorial provides an introduction to how Fabric applications interact with deployed blockchain networks. It uses sample programs built using Fabric SDK to invoke a smart contract which queries and updates the ledger with smart contract API. It also uses sample programs and a deployed Certificate Authority to generate X.509 certificates that an application needs to interact with a permissioned blockchain.</p>
<h4 id="Asset-Transfer"><a href="#Asset-Transfer" class="headerlink" title="Asset Transfer"></a>Asset Transfer</h4><p>Asset Transfer basic sample demonstrates how to initialize a ledger with assets, query assets, create new assets, update assets and transfer an asset to a new owner. It has two components: application and smart contract. The application makes calls to the blockchain network to invoke transactions implemented in the chaincode (smart contract). The smart contract implements the transactions that involve interactions with the ledger.</p>
<h4 id="Set-Up-Blockchain-Network"><a href="#Set-Up-Blockchain-Network" class="headerlink" title="Set Up Blockchain Network"></a>Set Up Blockchain Network</h4><p>Launch network by using <code>network.sh</code> script. Bring down current running network and bring up a new one with Certificate Authorities.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd fabric-samples/test-network</span><br><span class="line">./network.sh down</span><br><span class="line">./network.sh up createChannel -c mychannel -ca</span><br></pre></td></tr></table></figure>
<p>The script will deploy the Fabric test network with two peers, an ordering service and three certificate authorities.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Creating channel &#x27;mychannel&#x27;.</span><br><span class="line">If network is not up, starting nodes with CLI timeout of &#x27;5&#x27; tries and CLI delay of &#x27;3&#x27; seconds and using database &#x27;leveldb with crypto from &#x27;Certificate Authorities&#x27;</span><br><span class="line">Bringing up network</span><br><span class="line">LOCAL_VERSION=2.3.1</span><br><span class="line">DOCKER_IMAGE_VERSION=2.3.1</span><br><span class="line">CA_LOCAL_VERSION=1.4.9</span><br><span class="line">CA_DOCKER_IMAGE_VERSION=1.4.9</span><br><span class="line">Generating certificates using Fabric CA</span><br><span class="line">Creating network &quot;fabric_test&quot; with the default driver</span><br><span class="line">Creating ca_org2    ... done</span><br><span class="line">Creating ca_orderer ... done</span><br><span class="line">Creating ca_org1    ... done</span><br><span class="line">...</span><br><span class="line">Generating CCP files for Org1 and Org2</span><br><span class="line">Creating volume &quot;docker_orderer.example.com&quot; with default driver</span><br><span class="line">Creating volume &quot;docker_peer0.org1.example.com&quot; with default driver</span><br><span class="line">Creating volume &quot;docker_peer0.org2.example.com&quot; with default driver</span><br><span class="line">WARNING: Found orphan containers (ca_org2, ca_orderer, ca_org1) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up.</span><br><span class="line">Creating orderer.example.com    ... done</span><br><span class="line">Creating peer0.org2.example.com ... done</span><br><span class="line">Creating peer0.org1.example.com ... done</span><br><span class="line">Creating cli                    ... done</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND                  CREATED                  STATUS                  PORTS                                            NAMES</span><br><span class="line">cb268c151387        hyperledger/fabric-tools:latest     &quot;/bin/bash&quot;              Less than a second ago   Up Less than a second                                                    cli</span><br><span class="line">82354eb9645d        hyperledger/fabric-peer:latest      &quot;peer node start&quot;        2 seconds ago            Up Less than a second   0.0.0.0:7051-&gt;7051/tcp                           peer0.org1.example.com</span><br><span class="line">96303fd44a6b        hyperledger/fabric-peer:latest      &quot;peer node start&quot;        2 seconds ago            Up Less than a second   7051/tcp, 0.0.0.0:9051-&gt;9051/tcp                 peer0.org2.example.com</span><br><span class="line">9c37906e598b        hyperledger/fabric-orderer:latest   &quot;orderer&quot;                2 seconds ago            Up Less than a second   0.0.0.0:7050-&gt;7050/tcp, 0.0.0.0:7053-&gt;7053/tcp   orderer.example.com</span><br><span class="line">4179c79f4d47        hyperledger/fabric-ca:latest        &quot;sh -c &#x27;fabric-ca-se…&quot;   6 seconds ago            Up 5 seconds            0.0.0.0:7054-&gt;7054/tcp                           ca_org1</span><br><span class="line">33810360a9c3        hyperledger/fabric-ca:latest        &quot;sh -c &#x27;fabric-ca-se…&quot;   6 seconds ago            Up 5 seconds            7054/tcp, 0.0.0.0:9054-&gt;9054/tcp                 ca_orderer</span><br><span class="line">fdf33f12e860        hyperledger/fabric-ca:latest        &quot;sh -c &#x27;fabric-ca-se…&quot;   6 seconds ago            Up 5 seconds            7054/tcp, 0.0.0.0:8054-&gt;8054/tcp                 ca_org2</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>Deploy the chaincode with the chaincode name and language options.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network.sh deployCC -ccn basic -ccp ../asset-transfer-basic/chaincode-javascript/ -ccl javascript</span><br></pre></td></tr></table></figure>
<p>The chaincode will be successfully deployed.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">deploying chaincode on channel &#x27;mychannel&#x27;</span><br><span class="line">executing with the following</span><br><span class="line">- CHANNEL_NAME: mychannel</span><br><span class="line">- CC_NAME: basic</span><br><span class="line">- CC_SRC_PATH: ../asset-transfer-basic/chaincode-javascript/</span><br><span class="line">- CC_SRC_LANGUAGE: javascript</span><br><span class="line">...</span><br><span class="line">Committed chaincode definition for chaincode &#x27;basic&#x27; on channel &#x27;mychannel&#x27;:</span><br><span class="line">Version: 1.0, Sequence: 1, Endorsement Plugin: escc, Validation Plugin: vscc, Approvals: [Org1MSP: true, Org2MSP: true]</span><br><span class="line">Query chaincode definition successful on peer0.org2 on channel &#x27;mychannel&#x27;</span><br><span class="line">Chaincode initialization is not required</span><br></pre></td></tr></table></figure>
<h4 id="Sample-Application"><a href="#Sample-Application" class="headerlink" title="Sample Application"></a>Sample Application</h4><p>Install application dependencies for sample programs developed using Fabric SDK for Node.js.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd asset-transfer-basic/application-javascript</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>Dependencies defined in <code>package.json</code> will be installed and the directory will contain following files.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zhiqich@ubuntu:~/fabric-samples/asset-transfer-basic/application-javascript$ ls</span><br><span class="line">app.js  node_modules  package.json  package-lock.json</span><br></pre></td></tr></table></figure>
<p>Run application by the following command.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node app.js</span><br></pre></td></tr></table></figure>
<p>And results look like following.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">Loaded the network configuration located at /home/zhiqich/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json</span><br><span class="line">Built a CA Client named ca-org1</span><br><span class="line">Built a file system wallet at /home/zhiqich/fabric-samples/asset-transfer-basic/application-javascript/wallet</span><br><span class="line">Successfully enrolled admin user and imported it into the wallet</span><br><span class="line">Successfully registered and enrolled user appUser and imported it into the wallet</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Submit Transaction: InitLedger, <span class="keyword">function</span> creates the initial <span class="built_in">set</span> of assets on the ledger</span></span><br><span class="line">*** Result: committed</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Evaluate Transaction: GetAllAssets, <span class="keyword">function</span> returns all the current assets on the ledger</span></span><br><span class="line">*** Result: [</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;Key&quot;: &quot;asset1&quot;,</span><br><span class="line">    &quot;Record&quot;: &#123;</span><br><span class="line">      &quot;ID&quot;: &quot;asset1&quot;,</span><br><span class="line">      &quot;Color&quot;: &quot;blue&quot;,</span><br><span class="line">      &quot;Size&quot;: 5,</span><br><span class="line">      &quot;Owner&quot;: &quot;Tomoko&quot;,</span><br><span class="line">      &quot;AppraisedValue&quot;: 300,</span><br><span class="line">      &quot;docType&quot;: &quot;asset&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;Key&quot;: &quot;asset2&quot;,</span><br><span class="line">    &quot;Record&quot;: &#123;</span><br><span class="line">      &quot;ID&quot;: &quot;asset2&quot;,</span><br><span class="line">      &quot;Color&quot;: &quot;red&quot;,</span><br><span class="line">      &quot;Size&quot;: 5,</span><br><span class="line">      &quot;Owner&quot;: &quot;Brad&quot;,</span><br><span class="line">      &quot;AppraisedValue&quot;: 400,</span><br><span class="line">      &quot;docType&quot;: &quot;asset&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;Key&quot;: &quot;asset3&quot;,</span><br><span class="line">    &quot;Record&quot;: &#123;</span><br><span class="line">      &quot;ID&quot;: &quot;asset3&quot;,</span><br><span class="line">      &quot;Color&quot;: &quot;green&quot;,</span><br><span class="line">      &quot;Size&quot;: 10,</span><br><span class="line">      &quot;Owner&quot;: &quot;Jin Soo&quot;,</span><br><span class="line">      &quot;AppraisedValue&quot;: 500,</span><br><span class="line">      &quot;docType&quot;: &quot;asset&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;Key&quot;: &quot;asset4&quot;,</span><br><span class="line">    &quot;Record&quot;: &#123;</span><br><span class="line">      &quot;ID&quot;: &quot;asset4&quot;,</span><br><span class="line">      &quot;Color&quot;: &quot;yellow&quot;,</span><br><span class="line">      &quot;Size&quot;: 10,</span><br><span class="line">      &quot;Owner&quot;: &quot;Max&quot;,</span><br><span class="line">      &quot;AppraisedValue&quot;: 600,</span><br><span class="line">      &quot;docType&quot;: &quot;asset&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;Key&quot;: &quot;asset5&quot;,</span><br><span class="line">    &quot;Record&quot;: &#123;</span><br><span class="line">      &quot;ID&quot;: &quot;asset5&quot;,</span><br><span class="line">      &quot;Color&quot;: &quot;black&quot;,</span><br><span class="line">      &quot;Size&quot;: 15,</span><br><span class="line">      &quot;Owner&quot;: &quot;Adriana&quot;,</span><br><span class="line">      &quot;AppraisedValue&quot;: 700,</span><br><span class="line">      &quot;docType&quot;: &quot;asset&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;Key&quot;: &quot;asset6&quot;,</span><br><span class="line">    &quot;Record&quot;: &#123;</span><br><span class="line">      &quot;ID&quot;: &quot;asset6&quot;,</span><br><span class="line">      &quot;Color&quot;: &quot;white&quot;,</span><br><span class="line">      &quot;Size&quot;: 15,</span><br><span class="line">      &quot;Owner&quot;: &quot;Michel&quot;,</span><br><span class="line">      &quot;AppraisedValue&quot;: 800,</span><br><span class="line">      &quot;docType&quot;: &quot;asset&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Submit Transaction: CreateAsset, creates new asset with ID, color, owner, size, and appraisedValue arguments</span></span><br><span class="line">*** Result: committed</span><br><span class="line">*** Result: &#123;</span><br><span class="line">  &quot;ID&quot;: &quot;asset13&quot;,</span><br><span class="line">  &quot;Color&quot;: &quot;yellow&quot;,</span><br><span class="line">  &quot;Size&quot;: &quot;5&quot;,</span><br><span class="line">  &quot;Owner&quot;: &quot;Tom&quot;,</span><br><span class="line">  &quot;AppraisedValue&quot;: &quot;1300&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Evaluate Transaction: ReadAsset, <span class="keyword">function</span> returns an asset with a given assetID</span></span><br><span class="line">*** Result: &#123;</span><br><span class="line">  &quot;ID&quot;: &quot;asset13&quot;,</span><br><span class="line">  &quot;Color&quot;: &quot;yellow&quot;,</span><br><span class="line">  &quot;Size&quot;: &quot;5&quot;,</span><br><span class="line">  &quot;Owner&quot;: &quot;Tom&quot;,</span><br><span class="line">  &quot;AppraisedValue&quot;: &quot;1300&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Evaluate Transaction: AssetExists, <span class="keyword">function</span> returns <span class="string">&quot;true&quot;</span> <span class="keyword">if</span> an asset with given assetID exist</span></span><br><span class="line">*** Result: true</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Submit Transaction: UpdateAsset asset1, change the appraisedValue to 350</span></span><br><span class="line">*** Result: committed</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Evaluate Transaction: ReadAsset, <span class="keyword">function</span> returns <span class="string">&quot;asset1&quot;</span> attributes</span></span><br><span class="line">*** Result: &#123;</span><br><span class="line">  &quot;ID&quot;: &quot;asset1&quot;,</span><br><span class="line">  &quot;Color&quot;: &quot;blue&quot;,</span><br><span class="line">  &quot;Size&quot;: &quot;5&quot;,</span><br><span class="line">  &quot;Owner&quot;: &quot;Tomoko&quot;,</span><br><span class="line">  &quot;AppraisedValue&quot;: &quot;350&quot;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Submit Transaction: UpdateAsset asset70, asset70 does not exist and should <span class="built_in">return</span> an error</span></span><br><span class="line">2021-03-05T17:06:59.733Z - error: [Transaction]: Error: No valid responses from any peers. Errors:</span><br><span class="line">    peer=peer0.org2.example.com:9051, status=500, message=error in simulation: transaction returned with failure: Error: The asset asset70 does not exist</span><br><span class="line">    peer=peer0.org1.example.com:7051, status=500, message=error in simulation: transaction returned with failure: Error: The asset asset70 does not exist</span><br><span class="line">*** Successfully caught the error: </span><br><span class="line">    Error: No valid responses from any peers. Errors:</span><br><span class="line">    peer=peer0.org2.example.com:9051, status=500, message=error in simulation: transaction returned with failure: Error: The asset asset70 does not exist</span><br><span class="line">    peer=peer0.org1.example.com:7051, status=500, message=error in simulation: transaction returned with failure: Error: The asset asset70 does not exist</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Submit Transaction: TransferAsset asset1, transfer to new owner of Tom</span></span><br><span class="line">*** Result: committed</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">--&gt;</span><span class="bash"> Evaluate Transaction: ReadAsset, <span class="keyword">function</span> returns <span class="string">&quot;asset1&quot;</span> attributes</span></span><br><span class="line">*** Result: &#123;</span><br><span class="line">  &quot;ID&quot;: &quot;asset1&quot;,</span><br><span class="line">  &quot;Color&quot;: &quot;blue&quot;,</span><br><span class="line">  &quot;Size&quot;: &quot;5&quot;,</span><br><span class="line">  &quot;Owner&quot;: &quot;Tom&quot;,</span><br><span class="line">  &quot;AppraisedValue&quot;: &quot;350&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Enroll-Admin-User"><a href="#Enroll-Admin-User" class="headerlink" title="Enroll Admin User"></a>Enroll Admin User</h4><p>Admin registration is bootstrapped when the Certificate Authority is started, and it is executed right after the profile and wallet paths are specified.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build an in memory object with the network configuration (also known as a connection profile)</span></span><br><span class="line"><span class="keyword">const</span> ccp = buildCCPOrg1();</span><br><span class="line"></span><br><span class="line"><span class="comment">// build an instance of the fabric ca services client based on</span></span><br><span class="line"><span class="comment">// the information in the network configuration</span></span><br><span class="line"><span class="keyword">const</span> caClient = buildCAClient(FabricCAServices, ccp, <span class="string">&#x27;ca.org1.example.com&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// setup the wallet to hold the credentials of the application user</span></span><br><span class="line"><span class="keyword">const</span> wallet = <span class="keyword">await</span> buildWallet(Wallets, walletPath);</span><br><span class="line"></span><br><span class="line"><span class="comment">// in a real application this would be done on an administrative flow, and only once</span></span><br><span class="line"><span class="keyword">await</span> enrollAdmin(caClient, wallet, mspOrg1);</span><br></pre></td></tr></table></figure>
<p>After successfully enrolling admin, the log will print the following.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Built a CA Client named ca-org1</span><br><span class="line">Built a file system wallet at /home/zhiqich/fabric-samples/asset-transfer-basic/application-javascript/wallet</span><br><span class="line">Successfully enrolled admin user and imported it into the wallet</span><br></pre></td></tr></table></figure>
<h4 id="Register-and-Enroll-Application-User"><a href="#Register-and-Enroll-Application-User" class="headerlink" title="Register and Enroll Application User"></a>Register and Enroll Application User</h4><p>Application users are registered and enrolled by the <code>admin</code> user, and they will be used to interact with the blockchain network.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// in a real application this would be done only when a new user was required to be added</span></span><br><span class="line"><span class="comment">// and would be part of an administrative flow</span></span><br><span class="line"><span class="keyword">await</span> registerAndEnrollUser(caClient, wallet, mspOrg1, org1UserId, <span class="string">&#x27;org1.department1&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>After successfully enrolling user, the log will print the following.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Successfully registered and enrolled user appUser and imported it into the wallet</span><br></pre></td></tr></table></figure>
<h4 id="Prepare-Connection-to-Channel-and-Smart-Contract"><a href="#Prepare-Connection-to-Channel-and-Smart-Contract" class="headerlink" title="Prepare Connection to Channel and Smart Contract"></a>Prepare Connection to Channel and Smart Contract</h4><p>Use contract name and channel name to get reference to the Contract via Gateway. <code>getContract()</code> API is provided.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// setup the gateway instance</span></span><br><span class="line"><span class="comment">// The user will now be able to create connections to the fabric network and be able to</span></span><br><span class="line"><span class="comment">// submit transactions and query. All transactions submitted by this gateway will be</span></span><br><span class="line"><span class="comment">// signed by this user using the credentials stored in the wallet.</span></span><br><span class="line"><span class="keyword">await</span> gateway.connect(ccp, &#123;</span><br><span class="line">    wallet,</span><br><span class="line">    <span class="attr">identity</span>: org1UserId,</span><br><span class="line">    <span class="attr">discovery</span>: &#123; <span class="attr">enabled</span>: <span class="literal">true</span>, <span class="attr">asLocalhost</span>: <span class="literal">true</span> &#125; <span class="comment">// using asLocalhost as this gateway is using a fabric network deployed locally</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Build a network instance based on the channel where the smart contract is deployed</span></span><br><span class="line"><span class="keyword">const</span> network = <span class="keyword">await</span> gateway.getNetwork(channelName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the contract from the network.</span></span><br><span class="line"><span class="keyword">const</span> contract = network.getContract(chaincodeName);</span><br></pre></td></tr></table></figure>
<h4 id="Initialize-Ledger"><a href="#Initialize-Ledger" class="headerlink" title="Initialize Ledger"></a>Initialize Ledger</h4><p>The <code>submitTransaction()</code> function is used to invoke the chaincode <code>InitLedger()</code> function to populate the ledger with some sample data.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Initialize a set of asset data on the channel using the chaincode &#x27;InitLedger&#x27; function.</span></span><br><span class="line"><span class="comment">// This type of transaction would only be run once by an application the first time it was started after it</span></span><br><span class="line"><span class="comment">// deployed the first time. Any updates to the chaincode deployed later would likely not need to run</span></span><br><span class="line"><span class="comment">// an &quot;init&quot; type function.</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;\n--&gt; Submit Transaction: InitLedger, function creates the initial set of assets on the ledger&#x27;</span>);</span><br><span class="line"><span class="keyword">await</span> contract.submitTransaction(<span class="string">&#x27;InitLedger&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;*** Result: committed&#x27;</span>);</span><br><span class="line">...</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">InitLedger</span>(<span class="params">ctx</span>)</span> &#123;</span><br><span class="line">     <span class="keyword">const</span> assets = [</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="attr">ID</span>: <span class="string">&#x27;asset1&#x27;</span>,</span><br><span class="line">             <span class="attr">Color</span>: <span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">             <span class="attr">Size</span>: <span class="number">5</span>,</span><br><span class="line">             <span class="attr">Owner</span>: <span class="string">&#x27;Tomoko&#x27;</span>,</span><br><span class="line">             <span class="attr">AppraisedValue</span>: <span class="number">300</span>,</span><br><span class="line">         &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>The log after successful initialization will be the following.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">--&gt;</span><span class="bash"> Submit Transaction: InitLedger, <span class="keyword">function</span> creates the initial <span class="built_in">set</span> of assets on the ledger</span></span><br><span class="line">*** Result: committed</span><br></pre></td></tr></table></figure>
<h4 id="Invoke-Chaincode-Function"><a href="#Invoke-Chaincode-Function" class="headerlink" title="Invoke Chaincode Function"></a>Invoke Chaincode Function</h4><p>Each peer in a blockchain network hosts a copy of the ledger. An application program can view the most recent data from the ledger using read-only invocations of a smart contract (query). Applications can query data (key-value pairs) for a single or multiple keys. JSON query is also supported. The <code>evaluateTransaction</code> function is used to call <code>GetAllAssets()</code> function which returns all assets found in the world state.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Let&#x27;s try a query type operation (function).</span></span><br><span class="line"><span class="comment">// This will be sent to just one peer and the results will be shown.</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;\n--&gt; Evaluate Transaction: GetAllAssets, function returns all the current assets on the ledger&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> result = <span class="keyword">await</span> contract.evaluateTransaction(<span class="string">&#x27;GetAllAssets&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`*** Result: <span class="subst">$&#123;prettyJSONString(result.toString())&#125;</span>`</span>);</span><br><span class="line">...</span><br><span class="line"><span class="comment">// GetAllAssets returns all assets found in the world state.</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">GetAllAssets</span>(<span class="params">ctx</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> allResults = [];</span><br><span class="line">    <span class="comment">// range query with empty string for startKey and endKey does an open-ended query of all assets in the chaincode namespace.</span></span><br><span class="line">    <span class="keyword">const</span> iterator = <span class="keyword">await</span> ctx.stub.getStateByRange(<span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> iterator.next();</span><br><span class="line">    <span class="keyword">while</span> (!result.done) &#123;</span><br><span class="line">        <span class="keyword">const</span> strValue = Buffer.from(result.value.value.toString()).toString(<span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> record;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            record = <span class="built_in">JSON</span>.parse(strValue);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(err);</span><br><span class="line">            record = strValue;</span><br><span class="line">        &#125;</span><br><span class="line">        allResults.push(&#123; <span class="attr">Key</span>: result.value.key, <span class="attr">Record</span>: record &#125;);</span><br><span class="line">        result = <span class="keyword">await</span> iterator.next();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(allResults);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The results should be the following.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">--&gt;</span><span class="bash"> Evaluate Transaction: GetAllAssets, <span class="keyword">function</span> returns all the current assets on the ledger</span></span><br><span class="line">*** Result: [</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;Key&quot;: &quot;asset1&quot;,</span><br><span class="line">    &quot;Record&quot;: &#123;</span><br><span class="line">      &quot;ID&quot;: &quot;asset1&quot;,</span><br><span class="line">      &quot;Color&quot;: &quot;blue&quot;,</span><br><span class="line">      &quot;Size&quot;: 5,</span><br><span class="line">      &quot;Owner&quot;: &quot;Tomoko&quot;,</span><br><span class="line">      &quot;AppraisedValue&quot;: 300,</span><br><span class="line">      &quot;docType&quot;: &quot;asset&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>The function <code>submitTransaction()</code> can also be used to call function <code>CreateAsset()</code> to add a new asset to the world state.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CreateAsset issues a new asset to the world state with given details.</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">CreateAsset</span>(<span class="params">ctx, id, color, size, owner, appraisedValue</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> asset = &#123;</span><br><span class="line">      <span class="attr">ID</span>: id,</span><br><span class="line">      <span class="attr">Color</span>: color,</span><br><span class="line">      <span class="attr">Size</span>: size,</span><br><span class="line">      <span class="attr">Owner</span>: owner,</span><br><span class="line">      <span class="attr">AppraisedValue</span>: appraisedValue,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> ctx.stub.putState(id, Buffer.from(<span class="built_in">JSON</span>.stringify(asset)));</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">--&gt; Submit Transaction: CreateAsset, creates <span class="keyword">new</span> asset <span class="keyword">with</span> ID, color, owner, size, and appraisedValue <span class="built_in">arguments</span></span><br><span class="line">*** Result: committed</span><br><span class="line">*** Result: &#123;</span><br><span class="line">  <span class="string">&quot;ID&quot;</span>: <span class="string">&quot;asset13&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Color&quot;</span>: <span class="string">&quot;yellow&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Size&quot;</span>: <span class="string">&quot;5&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Owner&quot;</span>: <span class="string">&quot;Tom&quot;</span>,</span><br><span class="line">  <span class="string">&quot;AppraisedValue&quot;</span>: <span class="string">&quot;1300&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The chaincode also provides <code>AssetExists()</code>, <code>ReadAsset()</code> functions called by <code>evaluateTransaction()</code> function and <code>UpdateAsset()</code>, <code>TransferAsset()</code> functions called by <code>submitTransaction()</code> function to check whether a specific asset exists, get specific asset data, update a specific asset, and transfer a specific asset to a new owner.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AssetExists returns true when asset with given ID exists in world state.</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">AssetExists</span>(<span class="params">ctx, id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> assetJSON = <span class="keyword">await</span> ctx.stub.getState(id);</span><br><span class="line">    <span class="keyword">return</span> assetJSON &amp;&amp; assetJSON.length &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ReadAsset returns the asset stored in the world state with given id.</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">ReadAsset</span>(<span class="params">ctx, id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> assetJSON = <span class="keyword">await</span> ctx.stub.getState(id); <span class="comment">// get the asset from chaincode state</span></span><br><span class="line">    <span class="keyword">if</span> (!assetJSON || assetJSON.length === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`The asset <span class="subst">$&#123;id&#125;</span> does not exist`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> assetJSON.toString();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// UpdateAsset updates an existing asset in the world state with provided parameters.</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">UpdateAsset</span>(<span class="params">ctx, id, color, size, owner, appraisedValue</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> exists = <span class="keyword">await</span> <span class="built_in">this</span>.AssetExists(ctx, id);</span><br><span class="line">    <span class="keyword">if</span> (!exists) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`The asset <span class="subst">$&#123;id&#125;</span> does not exist`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// overwriting original asset with new asset</span></span><br><span class="line">    <span class="keyword">const</span> updatedAsset = &#123;</span><br><span class="line">        <span class="attr">ID</span>: id,</span><br><span class="line">        <span class="attr">Color</span>: color,</span><br><span class="line">        <span class="attr">Size</span>: size,</span><br><span class="line">        <span class="attr">Owner</span>: owner,</span><br><span class="line">        <span class="attr">AppraisedValue</span>: appraisedValue,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> ctx.stub.putState(id, Buffer.from(<span class="built_in">JSON</span>.stringify(updatedAsset)));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// TransferAsset updates the owner field of asset with given id in the world state.</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">TransferAsset</span>(<span class="params">ctx, id, newOwner</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> assetString = <span class="keyword">await</span> <span class="built_in">this</span>.ReadAsset(ctx, id);</span><br><span class="line">    <span class="keyword">const</span> asset = <span class="built_in">JSON</span>.parse(assetString);</span><br><span class="line">    asset.Owner = newOwner;</span><br><span class="line">    <span class="keyword">return</span> ctx.stub.putState(id, Buffer.from(<span class="built_in">JSON</span>.stringify(asset)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/04/tethering/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/04/tethering/" class="post-title-link" itemprop="url">iOS14 USB Tethering Issue on Ubuntu20.04 LTS</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-04 21:40:00" itemprop="dateCreated datePublished" datetime="2021-03-04T21:40:00-05:00">2021-03-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-05 12:24:33" itemprop="dateModified" datetime="2022-01-05T12:24:33-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/project/" itemprop="url" rel="index"><span itemprop="name">project</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Issue"><a href="#Issue" class="headerlink" title="Issue"></a>Issue</h2><p>Due to the change of <code>IPHETH_BUF_SIZE</code> parameter from 1516 to 1514 in iOS14, iPhone could not provide tethering connection to Ubuntu20.04 LTS.</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Modify the <code>IPHETH_BUF_SIZE</code> parameter in the source file <em>ipheth.c</em>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">cd /lib/modules/$(uname -r)/kernel/drivers/net/usb/</span><br><span class="line">cp -ia ipheth.ko ipheth.ko.orig</span><br><span class="line">xxd -p -c 20000 ipheth.ko.orig | sed &#x27;s/ec05/ea05/g&#x27; | xxd -r -p &gt; ipheth.ko</span><br><span class="line">strip --strip-debug ipheth.ko</span><br><span class="line">rmmod ipheth; modprobe ipheth</span><br></pre></td></tr></table></figure>
<h2 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite"></a>Prerequisite</h2><p>Install <code>sudo apt install build-essential</code> if there’s Wi-Fi or ethernet connection. If there’s no internet access available on the device, try downloading Ubuntu deb packages of build-essential <a target="_blank" rel="noopener" href="https://drive.google.com/drive/folders/1olJSft3HWL2qdB1lxQxhTkJblFSFSrU1?usp=sharing">Download</a> and installing with command <code>sudo dpkg -i package_name.deb</code>.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i libc6_2.31-0ubuntu9.1_amd64.deb</span><br><span class="line">sudo dpkg -i manpages-dev_5.05-1_all.deb</span><br><span class="line">sudo dpkg -i binutils-common_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i linux-libc-dev_5.4.0-48.52_amd64.deb</span><br><span class="line">sudo dpkg -i libctf-nobfd0_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i libgomp1_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libquadmath0_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libmpc3_1.1.0-1_amd64.deb</span><br><span class="line">sudo dpkg -i libatomic1_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libubsan1_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libcrypt-dev_4.4.10-10ubuntu4_amd64.deb</span><br><span class="line">sudo dpkg -i libisl22_0.22.1-1_amd64.deb</span><br><span class="line">sudo dpkg -i libbinutils_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i libc-dev-bin_2.31-0ubuntu9.1_amd64.deb</span><br><span class="line">sudo dpkg -i libcc1-0_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i liblsan0_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libitm1_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i gcc-9-base_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i libtsan0_10.2.0-5ubuntu1~20.04_amd64.deb</span><br><span class="line">sudo dpkg -i libctf0_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i libasan5_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i cpp-9_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i libc6-dev_2.31-0ubuntu9.1_amd64.deb</span><br><span class="line">sudo dpkg -i binutils-x86-64-linux-gnu_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i binutils_2.34-6ubuntu1_amd64.deb</span><br><span class="line">sudo dpkg -i libgcc-9-dev_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i cpp_9.3.0-1ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i gcc-9_9.3.0-10ubuntu2_amd64.deb</span><br><span class="line">sudo dpkg -i gcc_9.3.0-1ubuntu2_amd64.deb</span><br></pre></td></tr></table></figure>
<p><i><font color = gray><br>Copyright: Zhihu 「宋泠雨」, CC 4.0 BY-SA<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/342499361/">https://zhuanlan.zhihu.com/p/342499361\</a><br>Copyright: CSDN 「恍恍惚惚斯基」, CC 4.0 BY-SA<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42432439/article/details/108777302">https://blog.csdn.net/weixin_42432439/article/details/108777302</a><br></font></i></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/02/9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Zhiqi Chen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiqi Chen">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/02/9/" class="post-title-link" itemprop="url">9</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-03-02 13:47:34" itemprop="dateCreated datePublished" datetime="2021-03-02T13:47:34-05:00">2021-03-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-01-05 00:46:22" itemprop="dateModified" datetime="2022-01-05T00:46:22-05:00">2022-01-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/raving/" itemprop="url" rel="index"><span itemprop="name">raving</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <center><i><font color = gray>《繁花》 金宇澄</font></i></center>

<p>阿宝十岁，<br>邻居蓓蒂六岁。<br>两个人从假三层爬上屋顶，<br>瓦片温热，眼里是半个卢湾区……<br>蓓蒂拉紧阿宝，<br>小身体靠紧，<br>头发飞舞。<br>东南风一劲，<br>听见黄浦江船鸣，<br>圆号宽广的嗡嗡声，<br>抚慰少年人胸怀。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhiqi Chen</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  



  <script src="/js/third-party/fancybox.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
